/*! For license information please see quickload.2c7c30cefc969c338160.js.LICENSE.txt */
(self.webpackChunktrello_client=self.webpackChunktrello_client||[]).push([[70128],{"./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js":(e,t,r)=>{"use strict";var n,s,i,o,a;r.d(t,{B:()=>w,D:()=>v});var c=!(null!==(n=void 0!==(null===globalThis||void 0===globalThis||null===(s=globalThis.process)||void 0===s||null===(i=s.env)||void 0===i?void 0:i.JEST_WORKER_ID))&&void 0!==n&&n)&&"production"!==(null===globalThis||void 0===globalThis||null===(o=globalThis.process)||void 0===o||null===(a=o.env)||void 0===a?void 0:a.NODE_ENV),l=function(){var e;c&&(e=console).debug.apply(e,arguments)},u=r("./node_modules/process/browser.js"),d="@atlaskit/platform-feature-flags",p="__PLATFORM_FEATURE_FLAGS__",h=void 0!==u&&void 0!==u.env,m=!!h&&"true"===u.env.ENABLE_PLATFORM_FF,f=!!h&&"true"===u.env.STORYBOOK_ENABLE_PLATFORM_FF,g=m||f,y={earlyResolvedFlags:new Map,booleanResolver:function(e){return!1}},b="undefined"!=typeof window?window:globalThis;function v(e){var t;t=e,b[p].booleanResolver=t}function w(e){return function(e){if(g)return l('[%s]: The feature flags were enabled while running tests. The flag "%s" will be always enabled.',d,e),!0;try{var t,r=null===(t=b[p])||void 0===t?void 0:t.booleanResolver(e);return"boolean"!=typeof r?(console.warn("".concat(e," resolved to a non-boolean value, returning false for safety")),!1):r}catch(e){return!1}}(e)}b[p]=b[p]||y},"./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/analytics-client/index.js":(e,t,r)=>{"use strict";r.d(t,{IC:()=>T,vr:()=>P,ff:()=>D,oG:()=>N,rY:()=>x});var n=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("./node_modules/@atlassiansox/analytics-web-client/dist/esm/analyticsWebTypes.js"),i=r("./node_modules/@atlassiansox/analytics-web-client/dist/esm/analyticsWebClient.js"),o=r("./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js"),a=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/bsc-global-state/index.js"),c=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js"),l=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),u=r("./node_modules/@babel/runtime/regenerator/index.js"),d=r.n(u),p=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),h=r("./node_modules/@babel/runtime/helpers/esm/createClass.js"),m=new(function(){function e(){(0,p.A)(this,e)}return(0,h.A)(e,[{key:"cachedSamplingConfig",get:function(){return this.cache},set:function(e){this.cache=e}}]),e}()),f=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/is-ssr/index.js"),g=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/load-storage-controls-data/index.js"),y={usedGetCookie:1e5,usedGetCookieError:1,usedSetCookie:1e3,usedSetCookieError:1,usedSetStrictlyNecessaryCookie:1e4,usedSetStrictlyNecessaryCookieError:1,usedDeleteCookie:10,usedDeleteCookieError:1,usedCheckThirdParty:1e5,checkThirdPartyError:1,usedDocumentCookie:100,usedDocumentCookieError:1,initializeControlsError:1,loadStorageControlsError:1,updatePreferencesError:1,fetchConsentPreferencesError:1,saveConsentPreferencesError:1},b=["loadStorageControlsError"];function v(){return w.apply(this,arguments)}function w(){return(w=(0,l.A)(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.cachedSamplingConfig){e.next=2;break}return e.abrupt("return",m.cachedSamplingConfig);case 2:if(!(0,f.f)()){e.next=4;break}return e.abrupt("return",void 0);case 4:return e.next=6,(0,g.YV)();case 6:return t=e.sent,r=null==t?void 0:t.analyticsSamplingRatio,m.cachedSamplingConfig=r,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return _.apply(this,arguments)}function _(){return(_=(0,l.A)(d().mark((function e(t){var r,n,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b.includes(t)){e.next=2;break}return e.abrupt("return",y[t]);case 2:return e.next=4,v();case 4:return r=e.sent,s=void 0!==(null==(n=null!=r?r:y)?void 0:n[t])?n[t]:y[t],e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){!Math.floor(Math.random()*e)&&t()}function I(){return(I=(0,l.A)(d().mark((function e(t,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t);case 2:O(e.sent,r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S,k=function(){var e=window.location,t=e.origin,r=function(e){var t="";if(!e)return t;var r=function(t){return new RegExp("^".concat(t,"(/|$)")).test(String(e))};return r("/wiki")&&(t="/wiki"),r("/jira")&&(t="/jira"),r("/compass")&&(t="/compass"),r("/canvas")&&(t="/canvas"),(r("/servicedesk")||r("/jira/servicedesk"))&&(t="/servicedesk"),t}(e.pathname);return{domain:"".concat(t).concat(r),product:r.slice(1)}},j=function(e){var t,r,n=k(),s=n.domain,i=n.product;return A({featureFlagOn:(0,o.B)("platform.moonjelly.browser-storage-controls"),packageName:"@atlassian/browser-storage-controls",packageVersion:"2.8.3",domain:s,product:null!==(t=null===(r=(0,a.re)().product)||void 0===r?void 0:r.toLowerCase())&&void 0!==t?t:i},e&&e)},T=function(){try{!S&&(0,a.re)().analyticsEnabled&&(S=new i.A({env:(e=window.location.hostname,e.includes(".dev.")||e.includes(".stg.")?s.sR.STAGING:e.includes("localhost")||e.includes("ngrok")||e.includes("atlastunnel")?s.sR.DEV:s.sR.PROD),product:"atlassianCookies"},{useLegacyUrl:!1,disableCookiePersistence:!0}))}catch(e){c.V.error("Failed to initialize AnalyticsWebClient. ".concat(e))}var e;if((0,a.re)().analyticsEnabled)return S};function P(e){!function(e,t){I.apply(this,arguments)}(e.action,(function(){var t;return null===(t=T())||void 0===t?void 0:t.sendOperationalEvent({source:"package",actionSubject:"package",action:e.action,attributes:j(e.attributes)})}))}function x(e){var t;null===(t=T())||void 0===t||t.sendUIEvent(A(A({},e),{},{attributes:j(e.attributes)}))}function D(e){var t;null===(t=T())||void 0===t||t.sendScreenEvent(A(A({},e),{},{attributes:j(e.attributes)}))}function N(e){var t;null===(t=T())||void 0===t||t.sendTrackEvent(A(A({},e),{},{attributes:j(e.attributes)}))}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/bsc-global-state/index.js":(e,t,r)=>{"use strict";var n,s;r.d(t,{B_:()=>o,re:()=>i});var i=function(){return null==n&&(n=!0),{analyticsEnabled:n,product:s}},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.analyticsEnabled,r=void 0===t||t,i=e.product;n=r,s=void 0===i?"NONE":i}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/is-ssr/index.js":(e,t,r)=>{"use strict";r.d(t,{f:()=>o});var n=r("./node_modules/@atlassiansox/analytics-web-client/dist/esm/analyticsWebClient.js"),s=r("./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js"),i=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js"),o=function(){var e=!("undefined"!=typeof document&&"undefined"!=typeof window&&Document&&Document.prototype&&Object&&Object.defineProperty),t=!s.B,r=!Boolean(n.A);return e&&i.V.warn("Browser context is not available."),t&&i.V.warn("Platform Feature Flag library is not available"),n.A||i.V.warn("analytics-web-client is not available"),!!(e||t||r)}},"./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/load-storage-controls-data/index.js":(e,t,r)=>{"use strict";r.d(t,{YV:()=>d});var n,s,i,o=r("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),a=r("./node_modules/@babel/runtime/regenerator/index.js"),c=r.n(a),l=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js"),u=function(){var e=(0,o.A)(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Failed to fetch Cookies Cache! Cached promise was undefined");case 2:return e.next=4,t;case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Failed to fetch Cookies Cache! status: ".concat(r.status));case 7:return i=i||(null==r?void 0:r.json()),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,o.A)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}return e.abrupt("return",n);case 4:return e.prev=4,s||(s=fetch("https://atlassian-cookies--categories.us-east-1.prod.public.atl-paas.net/categories.json")),e.next=8,u(s);case 8:return n=e.sent,e.abrupt("return",n);case 12:e.prev=12,e.t0=e.catch(4),l.V.errorWithOperationalEvent({action:"loadStorageControlsError",message:e.t0.message||""}),n=void 0,s=void 0,i=void 0;case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}()},"./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js":(e,t,r)=>{"use strict";r.d(t,{V:()=>u});var n=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=r("./node_modules/@babel/runtime/helpers/esm/createClass.js"),o=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/analytics-client/index.js");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l="[browser-storage-controls]",u=function(){function e(){(0,s.A)(this,e)}return(0,i.A)(e,null,[{key:"info",value:function(e,t){console.log("".concat(l,": ").concat(e),t?JSON.stringify(t):"")}},{key:"error",value:function(e,t){console.error("".concat(l,": ").concat(e),t?JSON.stringify(t):"")}},{key:"errorWithOperationalEvent",value:function(e){var t=e.action,r=e.attributes,n=void 0===r?{}:r,s=e.message,i=e.metadata;try{(0,o.vr)({action:t,attributes:c({error:s},n)})}catch(e){this.error("Failed to send operational event on error: ".concat(t,". ").concat(e.message||""))}this.error(s,i?JSON.stringify(i):"")}},{key:"warn",value:function(e,t){console.warn("".concat(l,": ").concat(e),t?JSON.stringify(t):"")}}]),e}()},"./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/get-cookie/index.js":(e,t,r)=>{"use strict";r.d(t,{R:()=>c});var n=r("./node_modules/@atlassian/browser-storage-controls/node_modules/js-cookie/src/js.cookie.js"),s=r.n(n),i=r("./node_modules/@atlaskit/platform-feature-flags/dist/esm/index.js"),o=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/analytics-client/index.js"),a=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/common/utils/logger/index.js");function c(e){try{return(0,i.B)("platform.moonjelly.browser-storage-controls")&&(0,o.vr)({action:"usedGetCookie",attributes:{cookieKey:e}}),e?s().get(e):s().get()}catch(t){a.V.errorWithOperationalEvent({action:"usedGetCookieError",attributes:{cookieKey:e},message:"Failed to use get cookie. ".concat(t.message||"")})}}},"./node_modules/@atlassian/browser-storage-controls/node_modules/js-cookie/src/js.cookie.js":e=>{!function(t){if("function"==typeof define&&define.amd&&(define(t),!0),e.exports=t(),!!0){var r=window.Cookies,n=window.Cookies=t();n.noConflict=function(){return window.Cookies=r,n}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function s(){}function i(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},s.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var o=JSON.stringify(r);/^[\{\[]/.test(o)&&(r=o)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in i)i[c]&&(a+="; "+c,!0!==i[c]&&(a+="="+i[c].split(";")[0]));return document.cookie=t+"="+r+a}}function o(e,r){if("undefined"!=typeof document){for(var s={},i=document.cookie?document.cookie.split("; "):[],o=0;o<i.length;o++){var a=i[o].split("="),c=a.slice(1).join("=");r||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(a[0]);if(c=(n.read||n)(c,l)||t(c),r)try{c=JSON.parse(c)}catch(e){}if(s[l]=c,e===l)break}catch(e){}}return e?s[e]:s}}return s.set=i,s.get=function(e){return o(e,!1)},s.getJSON=function(e){return o(e,!0)},s.remove=function(t,r){i(t,"",e(r,{expires:-1}))},s.defaults={},s.withConverter=r,s}((function(){}))}))},"./node_modules/@atlassiansox/analytics-web-client/dist/esm/analyticsWebClient.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>Wr});var n=r("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=r("./node_modules/@atlassiansox/analytics-web-client/node_modules/uuid/v4.js"),i=r.n(s),o=r("./node_modules/@atlassiansox/analytics-web-client/dist/esm/analyticsWebTypes.js");class a{constructor(){(0,n.A)(this,"_bindEventListeners",(()=>{document.addEventListener(this._visibilityChange,this._handleVisibilityChange,!1)})),(0,n.A)(this,"_handleVisibilityChange",(()=>{const e=document[this._hidden];this._isHidden=e,this._callbacks.forEach((t=>t(e)))})),this._isHidden=!1,this._callbacks=new Map,this._hidden=void 0,this._visibilityChange=void 0,"undefined"!=typeof document&&(void 0!==document.hidden?(this._isHidden=document.hidden,this._hidden="hidden",this._visibilityChange="visibilitychange"):void 0!==document.msHidden?(this._isHidden=document.msHidden,this._hidden="msHidden",this._visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this._isHidden=document.webkitHidden,this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"),void 0!==document.addEventListener&&void 0!==this._hidden&&this._bindEventListeners())}addCallback(e,t){if("string"!=typeof e)throw new Error("Invalid name, must be string");if("function"!=typeof t)throw new Error("Invalid callback, must be function");this._callbacks.set(e,t)}removeCallback(e){this._callbacks.has(e)&&this._callbacks.delete(e)}getIsHidden(){return this._isHidden}}class c{constructor(){this._performance=window.performance}clearMarks(...e){this._performance&&this._performance.clearMarks&&this._performance.clearMarks(...e)}mark(...e){this._performance&&this._performance.mark&&this._performance.mark(...e)}getEntriesByName(...e){return this._performance&&this._performance.getEntriesByName?this._performance.getEntriesByName(...e):[]}getTimeOrigin(){return this._performance&&(this._performance.timeOrigin||this._performance.timing)?this._performance.timeOrigin||this._performance.timing.navigationStart:0}now(){return this._performance&&this._performance.now?this._performance.now():Date.now?Date.now():+new Date}isAvailable(){return!!(this._performance&&this._performance.clearMarks&&this._performance.mark&&this._performance.getEntriesByName&&this._performance.timing)}}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class d{constructor(e,t){if((0,n.A)(this,"_getEventKey",(({task:e,taskId:t})=>t?`${e}.${t}`:e)),(0,n.A)(this,"_getEventTimingByName",(e=>{const t=this._performance.getEntriesByName(e);return t[t.length-1]})),(0,n.A)(this,"_getApdexFields",(e=>{const t=this._getApdexTimings(e),r=this._calculateApdex({duration:t.duration,threshold:e.threshold});return u(u({},t),{},{apdex:r})})),(0,n.A)(this,"_getApdexTimings",(e=>{const t=this._getEventKey(e),r=`${t}-start`,n=e.startTime||this._getStartTime(e,r),s=e.stopTime||this._getStopTime();return this._cleanApdexState(t),{startTime:n,stopTime:s,duration:s-n}})),(0,n.A)(this,"_getStartTime",((e,t)=>{let r;const n=this._performance.getTimeOrigin();if(e.type===o.LR.INITIAL_LOAD)r=n;else{r=n+this._getEventTimingByName(t).startTime}return r})),(0,n.A)(this,"_getStopTime",(()=>this._performance.getTimeOrigin()+this._performance.now())),(0,n.A)(this,"_cleanApdexState",(e=>{this._performance.clearMarks(`${e}-start`),this._performance.clearMarks(`${e}-stop`),this._startedEvents.delete(e)})),(0,n.A)(this,"_getVisibilityFields",(e=>{let t;if(e.type===o.LR.INITIAL_LOAD)t=!this._wasPreviouslyHidden;else if(e.type===o.LR.TRANSITION){const r=this._getEventKey(e);t=this._isActiveEvents.get(r)}return(e.startTime||e.stopTime)&&(t=!this._pageVisibility.getIsHidden()),{isActiveTab:t}})),(0,n.A)(this,"_calculateApdex",(({duration:e,threshold:t=this._threshold})=>{let r;return r=e<=t?1:e<=4*t?.5:0,r})),(0,n.A)(this,"_validateStartEvent",(e=>{if(!e)throw new Error('Missing "event" in Apdex start event');if(!e.task)throw new Error('Missing "task" in Apdex start event');if("string"!=typeof e.task)throw new Error('Invalid "task" in Apdex start event');if(e.taskId&&"string"!=typeof e.taskId)throw new Error('Invalid "taskId" in Apdex start event')})),(0,n.A)(this,"_validateStopEvent",(e=>{if(!e)throw new Error('Missing "event" in Apdex stop event');if(!e.task)throw new Error('Missing "task" in Apdex stop event');if("string"!=typeof e.task)throw new Error('Invalid "task" in Apdex stop event');if(e.taskId&&"string"!=typeof e.taskId)throw new Error('Invalid "taskId" in Apdex stop event');if(!e.type)throw new Error('Missing "type" in Apdex stop event');if(e.type&&!(0,o.Xj)(o.LR,e.type))throw new Error('Invalid "type" in Apdex stop event');if(e.threshold&&"number"!=typeof e.threshold)throw new Error('Invalid "threshold" in Apdex stop event');if(!e.startTime&&e.type===o.LR.TRANSITION){const t=this._getEventKey(e);if(!this._startedEvents.has(t))throw new Error(`Apdex event transition "${t}" was not started`)}if(e.startTime&&!("number"==typeof e.startTime&&e.startTime>=0))throw new Error('Invalid "startTime" in Apdex stop event');if(e.stopTime&&"number"!=typeof e.stopTime)throw new Error('Invalid "stopTime" in Apdex stop event');if(e.stopTime<=e.startTime)throw new Error('"stopTime" should be greater than "startTime" in Apdex stop event')})),(0,n.A)(this,"_shouldSendEvent",(e=>!!e&&"number"==typeof e.apdex)),(0,n.A)(this,"_sendEvent",((e,t)=>{this._shouldSendEvent(e)&&this._onEvent({source:"ui",action:"readyForUser",actionSubject:"ui",attributes:u(u({},e.additionalAttributes),{},{task:e.task,taskId:e.taskId,type:e.type,threshold:e.threshold||this._threshold,apdex:e.apdex,startTime:e.startTime,stopTime:e.stopTime,duration:e.duration,isActiveTab:e.isActiveTab})},t)})),!e)throw new Error("Missing onEvent callback");if("function"!=typeof e)throw new Error("Invalid onEvent, must be function");if(!(t instanceof a))throw new Error("Invalid pageVisibility, must be PageVisibility class");this._startedEvents=new Map,this._performance=new c,this._onEvent=e,this._threshold=1e3,this._wasPreviouslyHidden=t.getIsHidden(),this._isActiveEvents=new Map,this._pageVisibility=t,this._pageVisibility.addCallback("apdexEvent",(e=>{this.onVisibilityChange(!e)}))}start(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;const t=this._getEventKey(e),r=`${t}-start`;this._startedEvents.set(t,!0),this._isActiveEvents.set(t,!this._pageVisibility.getIsHidden()),this._performance.clearMarks(r),this._performance.mark(r)}getStart(e){if(this._validateStartEvent(e),!this._performance.isAvailable())return;const t=`${this._getEventKey(e)}-start`;return this._getEventTimingByName(t)}stop(e,t){if(this._validateStopEvent(e),!this._performance.isAvailable())return;const r=this._getApdexFields(e),n=this._getVisibilityFields(e);this._sendEvent(u(u(u({},e),r),n),t)}onVisibilityChange(e){e||(this._wasPreviouslyHidden=!0,Array.from(this._isActiveEvents.keys()).forEach((e=>this._isActiveEvents.set(e,!1))))}}const p=(e,t)=>()=>{if((e=>"function"==typeof e)(e))try{return e()}catch(e){return void console.error(`${t} - ${e instanceof Error?e.message:String(e)}`)}return e};function h(e){return!0==(null!==(t=e)&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);var t}function m(e){if(!1===h(e))return!1;const t=e.constructor;if("function"!=typeof t)return!1;const r=t.prototype;return!1!==h(r)&&"isPrototypeOf"in r}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e){return{tenantIdType:e.tenantIdType,tenantId:e.tenantId}}function b(e){return{userIdType:e.userIdType}}function v(e){return{orgId:e.orgId}}function w(e){return{workspaceId:e.workspaceId}}function C(e){if(A(e))return{aliases:e}}function _(e){if(A(e))return{groups:e}}function O(e){return e.anonymousId?{anonymousId:e.anonymousId}:{}}function I(e,t){return void 0===t?e:t}function E(e,t){const r=t||{};return{env:I(e.env,r.env),product:I(e.product,r.product),subproduct:I(e.subproduct(),r.subproduct),version:I(e.version,r.version),origin:I(e.origin,r.origin),platform:I(e.platform,r.platform)}}function A(e){return m(e)&&Object.keys(e).length>0}function S(e,t){return A(t)?{[e]:t}:void 0}function k(e){if(A(e)){const t=function(e){const t={};return Object.keys(e).forEach((r=>{const n=e[r];t[r]={id:n.id,type:n.type}})),t}(e);return S("containers",t)}}function j(e,t){return g({containerType:e.containerType,containerId:e.containerId,source:e.source,objectType:e.objectType,objectId:e.objectId,actionSubject:e.actionSubject,action:e.action,actionSubjectId:e.actionSubjectId,attributes:e.attributes,nonPrivacySafeAttributes:e.nonPrivacySafeAttributes,tags:e.tags,highPriority:e.highPriority,eventType:t},k(e.containers))}function T(e,t,r,n,s,i,a,c,l,u,d,p,h,m,f,I){const A=E(e),j=y(t),T=b(r),P=v(u),x=w(p),D={title:"",path:"",url:"",referrer:"",search:"",eventType:o.$q.SCREEN};return g(g(g(g(g(g(g(g(g(g(g(g({},A),j),T),P),D),function(e){return S("attributes",e)}(n)),function(e){return S("nonPrivacySafeAttributes",e)}(s)),k(m)),O(h)),{},{tags:i,tabId:a,sessionId:c,taskSessions:l,pageLoadId:d},x),C(f)),_(I))}function P(e){return`${e.actionSubject} ${e.action}`}function x(e,t,r,n,s,i,o,a,c,l,u,d,p){const h=E(e,function(e){const{env:t,product:r,subproduct:n,version:s,origin:i,platform:o}=e;return{env:t,product:r,subproduct:n,version:s,origin:i,platform:o}}(n)),m=y(t),f=v(c),I=w(u),A=b(r),S=j(n,s);return g(g(g(g(g(g(g(g(g({},h),m),f),A),S),O(n)),{},{tabId:i,sessionId:o,taskSessions:a,pageLoadId:l},I),C(d)),_(p))}const D=(e,t)=>Object.keys(e).reduce(((r,n)=>(r[t(e[n],n,e)]=e[n],r)),{}),N=(e,t)=>Object.keys(e).filter((e=>t.indexOf(e)<0)).reduce(((t,r)=>(t[r]=e[r],t)),{}),R=(e,t)=>{if(e===t)return!0;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(!e||!t||"object"!=typeof e&&"object"!=typeof t)return e===t;if(e.prototype!==t.prototype)return!1;const r=Object.keys(e);return r.length===Object.keys(t).length&&r.every((r=>R(e[r],t[r])))},L=(e,t)=>e.reduce(((e,r,n,s)=>(e[t(r,n,s)?0:1].push(r),e)),[[],[]]),M=Object.freeze([o.$q.OPERATIONAL,o.$q.TRACK,o.$q.UI]);function F(e){if(e){if(e&&e.constructor!==Object)throw new Error("properties.containers must be an Object");Object.values(e).forEach((e=>function(e){if(!m(e))throw new Error("properties.containers must be an Object");if(!("id"in e))throw new Error("properties.containers is missing field 'id'");if("string"!=typeof e.id)throw new Error("properties.containers.id must be of type String");if("type"in e&&"string"!=typeof e.type)throw new Error("properties.containers.type must be of type String")}(e)))}}function U(e){switch(e){case o.$q.OPERATIONAL:case o.$q.TRACK:case o.$q.UI:return!0;default:return!1}}function B(e){if(!e)throw new Error("Missing event");if(!e.source)throw new Error("Missing event.source");if(!e.actionSubject)throw new Error("Missing event.actionSubject");if(!e.action)throw new Error("Missing event.action");F(e.containers)}class ${constructor(e,t){if((0,n.A)(this,"canCompress",(e=>{try{return e&&U(e.eventType)&&this.predicate(e)}catch(e){return!1}})),(0,n.A)(this,"compress",(e=>{const[t,r]=L(e,(e=>this.canCompress(e))),n=this.compressFn(t);if(!n)throw new Error("No events were returned from the compression function");return n.forEach((e=>{!function(e){if(!U(e))throw new Error(`Invalid action event type: ${e}, must be one of: [${M}]`)}(e.eventType),B(e)})),n.concat(r)})),"function"!=typeof e)throw new Error("Invalid predicate, must be a function that accepts an event and returns a boolean");if("function"!=typeof t)throw new Error("Invalid compressFn, must be a function that both accepts and returns an array of events");this.predicate=e,this.compressFn=t}}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class W{constructor(e=[]){if((0,n.A)(this,"canCompress",(e=>this.compressionRules.some((t=>t.canCompress(e))))),(0,n.A)(this,"compress",(e=>this.createGroups(e).reduce(((e,t)=>{const r=this.compressGroup(t);return e.concat(r)}),[]))),(0,n.A)(this,"createGroups",(e=>e.reduce(((e,t)=>{const r=this.compressionRules.find((e=>e.canCompress(t)));let n;if(r){const e=j(t,t.eventType);n=N(t,Object.keys(e))}const s=e.find((e=>r===e.compressor&&R(n,e.contextFields)));return s?s.events.push(t):e.push({contextFields:n,compressor:r,events:[t]}),e}),[]))),(0,n.A)(this,"compressGroup",(e=>{if(!e.compressor)return e.events;try{return e.compressor.compress(e.events).map((t=>V(V({},t),e.contextFields)))}catch(t){return console.warn(`Failed to compress some analytics events. Error: ${t.message}. Sending ${e.events.length} uncompressed events instead`),e.events}})),!Array.isArray(e))throw new Error("Event compressors must be constructed with an array of CompressionRules");if(!e.every((e=>e instanceof $)))throw new Error("Event compressors can only be constructed with instances of CompressionRule");this.compressionRules=e}}class H{constructor(e,t){(0,n.A)(this,"push",((e,t,r,n)=>{this.eventArgs.push({identifier:e,builtEvent:t,context:r,userInfo:n})})),(0,n.A)(this,"size",(()=>this.eventArgs.length)),(0,n.A)(this,"startFlush",(()=>{try{this.eventArgs=this.compressEventArgs(this.eventArgs)}catch(e){console.warn(`Failed to perform compression on the delayed analytics events. Error: ${e.message}. Sending ${this.eventArgs.length} uncompressed events instead`)}this.flushNextBatch()})),(0,n.A)(this,"cancelFlush",(()=>{this.flushBatchTimeout&&(clearTimeout(this.flushBatchTimeout),this.flushBatchTimeout=null)})),(0,n.A)(this,"flushNextBatch",(()=>{this.eventArgs.splice(0,7).forEach((e=>this.processFn(e.identifier,e.builtEvent,e.context,e.userInfo))),this.eventArgs.length>0?this.flushBatchTimeout=setTimeout((()=>this.flushNextBatch()),100):this.flushBatchTimeout=null})),(0,n.A)(this,"compressEventArgs",(e=>{const[t,r]=L(e,(e=>this.compressor.canCompress(e.builtEvent))),n=t.reduce(((e,t)=>{const r=e.find((e=>R(e.userInfo,t.userInfo)&&R(e.context,t.context)));return r?r.eventArgs.push(t):e.push({userInfo:t.userInfo,context:t.context,eventArgs:[t]}),e}),[]).reduce(((e,t)=>{try{const r=t.eventArgs.map((e=>e.builtEvent)),n=this.compressor.compress(r).map((e=>({identifier:P(e),builtEvent:e,userInfo:t.userInfo,context:t.context})));return e.concat(n)}catch(e){return console.warn(`Failed to compress some analytics events. Error: ${e.message}. Sending ${t.eventArgs.length} uncompressed events instead`),t.eventArgs}}),[]);return r.forEach((e=>n.push(e))),n})),this.processFn=e,this.flushBatchTimeout=null,this.eventArgs=[],this.compressor=new W(t)}}let K=function(e){return e.TIMEOUT="timeout",e.MANUAL="manual",e}({});class z{constructor(e,t){(0,n.A)(this,"push",((e,t,r,n)=>{this.delayQueue.push(e,t,r,n)})),(0,n.A)(this,"startLowPriorityEventDelay",((e=1e4,t)=>{if(Number.isNaN(e)||e<=0)throw new Error(`Invalid timeout period: ${e}, must be a number greater than 0`);this.delayTimeout&&clearTimeout(this.delayTimeout);const r=e?Math.min(e,3e4):3e4;this.delayCallback=t,this.delayTimeout=setTimeout((()=>this.stopLowPriorityEventDelay(K.TIMEOUT)),r),this.delayQueue.cancelFlush(),this.isDelaying=!0})),(0,n.A)(this,"stopLowPriorityEventDelay",((e=K.MANUAL)=>{var t;this.delayTimeout&&(clearTimeout(this.delayTimeout),this.delayTimeout=void 0),this.delayQueue.startFlush(),this.isDelaying=!1,null===(t=this.delayCallback)||void 0===t||t.call(this,e),this.delayCallback=void 0})),(0,n.A)(this,"isDelayingLowPriorityEvents",(()=>this.isDelaying)),this.isDelaying=!1,this.delayQueue=new H(e,t)}}let G=function(e){return e.IN_PROGRESS="inProgress",e.QUEUE="queue",e.RECLAIM_START="reclaimStart",e.RECLAIM_END="reclaimEnd",e.ACK="ack",e}({}),Q=function(e){return e[e.RECLAIM_TIMEOUT=1e4]="RECLAIM_TIMEOUT",e[e.RECLAIM_WAIT=500]="RECLAIM_WAIT",e[e.RECLAIM_WAIT_THRESHOLD=2e3]="RECLAIM_WAIT_THRESHOLD",e}({});const J=(e,t)=>({[G.ACK]:`${e}.${t}.${G.ACK}`,[G.QUEUE]:`${e}.${t}.${G.QUEUE}`,[G.IN_PROGRESS]:`${e}.${t}.${G.IN_PROGRESS}`,[G.RECLAIM_START]:`${e}.${t}.${G.RECLAIM_START}`,[G.RECLAIM_END]:`${e}.${t}.${G.RECLAIM_END}`}),X=Object.values(G);function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ee=e=>new Promise((t=>{setTimeout(t,e)})),te=async(e,t)=>{const{queue:r,inProgress:n}=e.storageKeys,s=JSON.parse(localStorage.getItem(r)||"[]"),i=JSON.parse(localStorage.getItem(n)||"{}"),o=[...s,...Object.entries(i).map((([e,t])=>Z(Z({},t),{},{attemptNumber:t.attemptNumber+1,id:e})))];if(o.length>0){const s=await t(o);if("successful"===s.status)re(e.storageKeys);else if("partial"===s.status){const e=o.filter((e=>!s.acceptedItemIds.includes(e.id)));return localStorage.removeItem(n),localStorage.setItem(r,JSON.stringify(e)),{fullReclaim:!1}}}else re(e.storageKeys);return{fullReclaim:!0}},re=e=>{localStorage.removeItem(e.queue),localStorage.removeItem(e.inProgress),localStorage.removeItem(e.reclaimEnd),localStorage.removeItem(e.reclaimStart),localStorage.removeItem(e.ack)},ne=async(e,t)=>{if("string"!=typeof e||0===e.length)return{fullReclaims:0,partialReclaims:0,failedReclaims:0};const r=i()(),n=(e=>{try{return Object.keys(localStorage).filter((t=>t.startsWith(e))).map((e=>e.split("."))).filter((t=>{if(3===t.length&&t[0]===e&&t[2]===G.ACK)try{const e=localStorage.getItem(t.join("."));if(e){const t=parseInt(e);return Q.RECLAIM_TIMEOUT+t<Date.now()}}catch(e){}return!1})).map((e=>e[1]))}catch(e){}return[]})(e),s=n.map((n=>(async(e,t)=>{const{ack:r,reclaimStart:n,reclaimEnd:s}=e.storageKeys,i=Date.now();if(localStorage.setItem(n,e.reclaimProcessId),localStorage.setItem(r,i.toString()),await ee(Q.RECLAIM_WAIT),Date.now()>i+Q.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(n)!==e.reclaimProcessId)throw new Error("Took to long to callback, reclaim abandonded. After reclaimStart.");if(localStorage.setItem(s,e.reclaimProcessId),await ee(Q.RECLAIM_WAIT),Date.now()>i+Q.RECLAIM_WAIT_THRESHOLD||localStorage.getItem(n)!==e.reclaimProcessId||localStorage.getItem(s)!==e.reclaimProcessId)throw new Error("Took to long to callback, reclaim abandonded. After reclaimEnd.");return te(e,t)})({queuePrefix:e,reclaimProcessId:r,storageKeys:J(e,n)},t))),o=await Promise.allSettled(s),a=o.filter((e=>"rejected"===e.status)),c=o.filter((e=>"fulfilled"===e.status)).map((e=>e.value)),l=c.filter((e=>e.fullReclaim)),u=c.filter((e=>!e.fullReclaim));return{failedReclaims:a.length,partialReclaims:u.length,fullReclaims:l.length}},se="namespace-timeAdded",ie="analytics-resilience",oe="timeToBeProcessedAfter",ae="timeAdded",ce="retryAttempts";let le=function(e){return e.INDEXEDDB="indexeddb",e.MEMORY="memory",e}({}),ue=function(e){return e.IGNORE="ignore",e.ABANDON="abandon",e.EVICT="evict",e}({});class de extends Error{constructor(){super("window.indexeddb is undefined."),Object.setPrototypeOf(this,de.prototype),this.name="NoIndexedDbError"}}const pe="AbandonWriteError";class he extends Error{constructor(e){super(`Event Limit reached. Abandoning write to: ${e}`),Object.setPrototypeOf(this,he.prototype),this.name=pe}}const me="CallbackProcessingError";class fe extends Error{constructor(e){super(`Error thrown while processing events in callback: ${e&&"object"==typeof e&&"toString"in e&&"function"==typeof e.toString&&e.toString()||"string"==typeof e&&e||"Argument passed to CallbackProcessingError was not an Error or string."}`),Object.setPrototypeOf(this,fe.prototype),this.name=me}}const ge="InvalidPolicyError";class ye extends Error{constructor(e,t){super(`Method '${t}' cannot be called with policy '${e}'.`),this.name=ge}}const be=e=>{if(e&&"object"==typeof e&&"name"in e){const t=e;return"string"==typeof t.name&&(t.name===pe||t.name===me||t.name===ge)}return!1};var ve=r("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js");const we=(e,t,{id:r,retryAttempts:n,timeToProcessOffset:s})=>({item:e,id:r||i()(),retryAttempts:n||0,timeToBeProcessedAfter:Date.now()+(s||0),namespace:t,timeAdded:Date.now()}),Ce=e=>({logger:e.logger||console,useMemory:e.useMemory||!1,maxAttempts:e.maxAttempts||10,maxEventLimit:e.maxEventLimit||5e3}),_e=e=>new Promise(((t,r)=>{e.onsuccess=e=>{t(e)},e.onerror=e=>{r(e)}})),Oe=(e,t)=>{try{"function"==typeof e.commit&&e.commit()}catch(e){throw t.error("Failed to force commit transaction:",e),e}return(e=>new Promise(((t,r)=>{e.oncomplete=()=>{t()},e.onerror=e=>{r(e)},e.onabort=e=>{r(e)}})))(e)},Ie=(e,t)=>{e.onerror=e=>{t.warn("Error thrown from request:",e)}};class Ee{constructor(e,t,r,s){if((0,n.A)(this,"deleteOldestNEvents",(async(e,t)=>{var r;const n=e.index(se),s=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),i=n.getAllKeys(s,t),o=await _e(i),a=null==o||null===(r=o.target)||void 0===r?void 0:r.result;if(a&&Array.isArray(a)&&a.length>0)try{const t=a.map((t=>this.deleteItemHandler(e,t)));await Promise.all(t)}catch(e){throw this.logger.warn("Failed to delete items from indexeddb.",e),e}})),!(e>0))throw Error("Event Limit has to be set higher than 1");this.eventLimit=e,this.namespace=t,this.logger=r,this.deleteItemHandler=s}async insertItems(e,t,r=ue.ABANDON){const n=[...t];let s=0;switch(r){case ue.ABANDON:await this.throwIfNotEnoughSpace(e,t.length);break;case ue.EVICT:s=await this.evictIfNotEnoughSpace(e,t.length);break;case ue.IGNORE:await this.calculateHowManyEventsWeCanAdd(e,n)}const i=n.map((t=>_e(e.add(t))));return await Promise.all(i),await Oe(e.transaction,this.logger),{items:n,numberOfEvictedItems:s}}async throwIfNotEnoughSpace(e,t){const r=await this.calculateFreeSpace(e);if(r<t)throw new he(`Not enough space in IndexedDb. Needed ${t} but only had ${r}`)}async evictIfNotEnoughSpace(e,t){const r=await this.calculateFreeSpace(e);if(r<t){const n=t-r;return await this.deleteOldestNEvents(e,n),n}return 0}async calculateHowManyEventsWeCanAdd(e,t){const r=await this.calculateFreeSpace(e);if(r<t.length){const e=t.length-r,n=t.length-e;t.splice(n,e)}}async calculateFreeSpace(e){const t=await this.getCountofEventsInObjectStore(e);return this.eventLimit-t}async getCountofEventsInObjectStore(e){const t=e.index(se),r=IDBKeyRange.bound([this.namespace,0],[this.namespace,Date.now()]),n=t.count(r);return(await _e(n)).target.result}}const Ae=["item"],Se=["items"];function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}class je{constructor(e,t={}){if((0,n.A)(this,"startDB",(async()=>new Promise((async(e,t)=>{if("undefined"!=typeof window){const r=window.setTimeout((()=>{this.logger.warn("IndexedDB timed out."),t(new de)}),15e3),n=window.indexedDB.open("analytics-web-client",1);n.onupgradeneeded=e=>{if(0!==e.oldVersion)throw new Error("We cannot upgrade the database. Do not do this.");const t=n.result.createObjectStore(ie,{keyPath:"id"});t.createIndex(oe,oe,{unique:!1}),t.createIndex(ce,ce,{unique:!1}),t.createIndex(ae,ae,{unique:!1}),t.createIndex(se,["namespace","timeAdded"],{unique:!1})};try{return await _e(n),e(n.result)}catch(e){this.logger.warn("IndexedDB failed to initialise.",e),t(new de)}finally{window.clearTimeout(r)}}else this.logger.warn("IndexedDB failed to initialise. No 'window' object."),t(new de)})))),(0,n.A)(this,"addItem",(async(e,t={},r=ue.ABANDON)=>{const{logger:n,namespace:s}=this,i=we(e,s,t),{objectStore:o}=await this.getObjectStoreAndTransaction("readwrite");if(r===ue.IGNORE)throw new ye(r,"IndexedDbConnector#addItem");try{if(!i.namespace||0===i.namespace.length||"string"!=typeof i.namespace)throw new Error("Namespace not specified");const e=await this.globalEventLimitGuard.insertItems(o,[i],r);if(1===e.items.length)return{item:e.items[0],numberOfEvictedItems:e.numberOfEvictedItems};throw new Error(`Incorrect number of items added. Expected: 1, got: ${e.items.length}`)}catch(e){if(be(e))throw e;throw n.log("Failed to add item to table",e),new Error("Request to add item to table failed")}})),(0,n.A)(this,"bulkAddItem",(async(e,t=ue.ABANDON)=>{const{logger:r,namespace:n}=this,s=e.map((e=>{let{item:t}=e,r=(0,ve.A)(e,Ae);return we(t,n,r)})),{objectStore:i}=await this.getObjectStoreAndTransaction("readwrite");try{return await this.globalEventLimitGuard.insertItems(i,s,t)}catch(e){if(be(e))throw e;throw r.log("Failed to add item to table",e),new Error("Request to add item to table failed")}})),(0,n.A)(this,"getItems",(async(e=7)=>{const t=e>0?e:7,{logger:r}=this,s=this.options.maxAttempts,{transaction:i,objectStore:o}=await this.getObjectStoreAndTransaction("readwrite"),a=o.index(oe),c=IDBKeyRange.upperBound(Date.now()),l=a.openCursor(c),u=await new Promise((async(e,i)=>{const o=[];let a=0;l.onerror=e=>{r.error("Failed to open cursor:",e),i("Failed to open cursor")},l.onsuccess=i=>{const c=i.target.result;if(c){const i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},c.value);o.push(i);const l=c.value;if(l.retryAttempts+=1,l.timeToBeProcessedAfter=Date.now()+6e4,l.retryAttempts>=s){++a;const e=c.delete();Ie(e,r)}else{const e=c.update(l);Ie(e,r)}o.length<t?c.continue():e({items:o,numberOfDeletedItems:a})}else e({items:o,numberOfDeletedItems:a})}}));return await Oe(i,this.logger),u})),(0,n.A)(this,"deleteItems",(async e=>{const{transaction:t,objectStore:r}=await this.getObjectStoreAndTransaction("readwrite");try{const n=e.map((e=>this.deleteItem(r,e)));await Oe(t,this.logger),await Promise.all(n)}catch(e){throw this.logger.warn("Failed to delete items from indexeddb.",e),e}})),(0,n.A)(this,"getItemCount",(async()=>{const{transaction:e,objectStore:t}=await this.getObjectStoreAndTransaction("readonly"),r=t.index(oe),n=IDBKeyRange.upperBound(Date.now()),s=r.count(n),i=await _e(s);return await Oe(e,this.logger),i.target.result})),(0,n.A)(this,"processItems",(async(e,t=7)=>{const r=await this.getItems(t),{items:n}=r,s=(0,ve.A)(r,Se);try{const t=await e(n,s),r=n.map((e=>e.id));return await this.deleteItems(r),t}catch(e){throw new fe(e)}})),(0,n.A)(this,"deleteItem",(async(e,t)=>{const{logger:r}=this;try{await _e(e.delete(t))}catch(e){throw r.error("Failed to delete item:",t,e),e}})),(0,n.A)(this,"getObjectStoreAndTransaction",(async e=>{const t=(await this.db).transaction(ie,e),r=t.objectStore(ie);return{transaction:t,objectStore:r}})),this.options=Ce(t),this.namespace=e,this.logger=this.options.logger,!window.indexedDB)throw new de;this.db=this.startDB(),this.db.catch((()=>{})),this.globalEventLimitGuard=new Ee(this.options.maxEventLimit,this.namespace,this.logger,this.deleteItem)}storeType(){return le.INDEXEDDB}}class Te{constructor(e,t){if((0,n.A)(this,"insertItemsToMemoryStore",((e,t)=>{switch(t){case ue.ABANDON:return this.handleAbandonIfLimitWillExceedPolicy(e);case ue.EVICT:return Promise.resolve(this.handleEvictOldestIfLimitExceededPolicy(e));case ue.IGNORE:return this.handleAddAsManyAsPossible(e)}})),!(e>0))throw Error("Event Limit has to be set higher than 1");this.eventLimit=e,this.memoryItemHandlers=t}async handleAbandonIfLimitWillExceedPolicy(e){if(await this.memoryItemHandlers.getItemCount()+e.length>this.eventLimit)throw new he(le.MEMORY);return this.memoryItemHandlers.addItems(e),{items:e,numberOfEvictedItems:0}}handleEvictOldestIfLimitExceededPolicy(e){this.memoryItemHandlers.addItems(e);return{items:e,numberOfEvictedItems:this.memoryItemHandlers.evictEventsIfNeeded(this.eventLimit)}}async handleAddAsManyAsPossible(e){const t=this.eventLimit-await this.memoryItemHandlers.getItemCount(),r=t>e.length?e:e.slice(0,t);return this.memoryItemHandlers.addItems(r),{items:r,numberOfEvictedItems:0}}}const Pe=["item"],xe=["items"];function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?De(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class Re{constructor(e,t={}){this.namespace=e,this.memoryStore=[],this.options=Ce(t),this.globalEventLimitGuard=new Te(this.options.maxEventLimit,{addItems:this.addItems.bind(this),getItemCount:this.getItemCount.bind(this),evictEventsIfNeeded:this.evictEventsIfNeeded.bind(this)})}async addItem(e,t={},r=ue.ABANDON){if(r===ue.IGNORE)throw new ye(r,"IndexedDbConnector#addItem");const n=we(e,this.namespace,t),s=await this.globalEventLimitGuard.insertItemsToMemoryStore([n],r);return Promise.resolve({item:s.items[0],numberOfEvictedItems:s.numberOfEvictedItems})}bulkAddItem(e,t=ue.ABANDON){const r=e.map((e=>{let{item:t}=e,r=(0,ve.A)(e,Pe);return we(t,this.namespace,r)}));return this.bulkAddItemWrapperType(r,t)}bulkAddItemWrapperType(e,t=ue.ABANDON){return Promise.resolve(this.globalEventLimitGuard.insertItemsToMemoryStore(e,t))}getItems(e=7){return Promise.resolve(this.synchronousGetItems(e))}synchronousGetItems(e=7){const t=e>0?e:7,r=Date.now(),n=[],s=[];for(let e of this.memoryStore)if(e.timeToBeProcessedAfter<=r&&(n.push(Ne({},e)),e.timeToBeProcessedAfter+=6e4,e.retryAttempts+=1,e.retryAttempts>=this.options.maxAttempts&&s.push(e)),n.length>=t)break;return s.forEach((e=>{const t=this.memoryStore.indexOf(e);this.memoryStore.splice(t,1)})),{items:n,numberOfDeletedItems:s.length}}deleteItems(e){return this.memoryStore=this.memoryStore.filter((t=>!e.includes(t.id))),Promise.resolve(void 0)}getItemCount(){const e=Date.now(),t=this.memoryStore.filter((t=>t.timeToBeProcessedAfter<=e)).length;return Promise.resolve(t)}async processItems(e,t){const r=this.synchronousGetItems(t),{items:n}=r,s=(0,ve.A)(r,xe),i=n.map((e=>e.id));try{const t=await e(n,s);return await this.deleteItems(i),t}catch(e){throw new fe(e)}}storeType(){return le.MEMORY}addItems(e){this.memoryStore.push(...e),this.memoryStore.sort((function(e,t){return e.timeAdded-t.timeAdded}))}evictEventsIfNeeded(e){const t=this.memoryStore.length;if(t>e){const r=t-e;return this.memoryStore.splice(0,r),r}return 0}}const Le=class{constructor(e,t={}){if(this.namespace=e,this.options=Ce(t),!e||0===e.length||"string"!=typeof e)throw new Error("Invalid namespace provided");this.resilience=this.getResilienceMechanism(e,t)}getResilienceMechanism(e,t){if(!t.useMemory)try{return new je(e,t)}catch(e){var r;if(!(e instanceof de))null===(r=t.logger)||void 0===r||r.warn("Attempted to create IndexedDbResilience but failed. Using memory instead.")}return new Re(this.namespace,t)}addItem(e,t,r=ue.ABANDON){return this.runOrFailOver((()=>this.resilience.addItem(e,t,r)))}bulkAddItem(e,t=ue.ABANDON){return this.runOrFailOver((()=>this.resilience.bulkAddItem(e,t)))}getItems(e){return this.runOrFailOver((()=>this.resilience.getItems(e)))}deleteItems(e){return this.runOrFailOver((()=>this.resilience.deleteItems(e)))}getItemCount(){return this.runOrFailOver((()=>this.resilience.getItemCount()))}processItems(e,t){return this.runOrFailOver((()=>this.resilience.processItems(e,t)))}storeType(){return this.resilience.storeType()}async runOrFailOver(e){try{return await e()}catch(t){if(be(t))throw t;return this.resilience.storeType()===le.INDEXEDDB&&await this.failOver(),e()}}async failOver(){const e=this.resilience,t=new Re(this.namespace,this.options);this.resilience=t;try{const{items:r}=await e.getItems(this.options.maxEventLimit);if(r.length>0){const n=(await t.bulkAddItemWrapperType(r,ue.IGNORE)).items.map((e=>e.id));await e.deleteItems(n)}}catch(e){this.options.logger.warn("Unexpected error from ResilienceDb, switching to MemoryDb")}}};let Me=function(e){return e.INDEXEDDB="indexeddb",e.MEMORY="memory",e}({}),Fe=function(e){return e[e.ONLINE=0]="ONLINE",e[e.OFFLINE=1]="OFFLINE",e}({});class Ue{constructor(){(0,n.A)(this,"itemsDiscardedByRetry",0),(0,n.A)(this,"eventCount",0),(0,n.A)(this,"itemsDiscardedByOverflow",0),(0,n.A)(this,"resilienceMechanism",Me.INDEXEDDB),(0,n.A)(this,"localstorageNumberOfQueuesPurged",0),(0,n.A)(this,"localstorageNumberOfFullReclaims",0),(0,n.A)(this,"localstorageNumberOfPartialReclaims",0),(0,n.A)(this,"localstorageNumberOfFailedReclaims",0)}addToItemsDiscardedByRetryCounter(e=1){this.itemsDiscardedByRetry+=e}addToEventCount(){this.eventCount++}addToItemsDiscardedByOverflowCounter(e=1){this.itemsDiscardedByOverflow+=e}setResilienceMechanism(e){this.resilienceMechanism=e}addToReclaimMetrics(e){this.localstorageNumberOfFullReclaims+=e.fullReclaims,this.localstorageNumberOfPartialReclaims+=e.partialReclaims,this.localstorageNumberOfFailedReclaims+=e.failedReclaims}addToPurgedQueuesMetrics(e){this.localstorageNumberOfQueuesPurged+=e}subtractFromMetrics(e){this.itemsDiscardedByRetry=this.subtractFromCount(this.itemsDiscardedByRetry,e.itemsDiscardedByRetry),this.eventCount=this.subtractFromCount(this.eventCount,e.eventCount),this.itemsDiscardedByOverflow=this.subtractFromCount(this.itemsDiscardedByOverflow,e.itemsDiscardedByOverflow),this.localstorageNumberOfFullReclaims=this.subtractFromCount(this.localstorageNumberOfFullReclaims,e.fullReclaims),this.localstorageNumberOfPartialReclaims=this.subtractFromCount(this.localstorageNumberOfPartialReclaims,e.partialReclaims),this.localstorageNumberOfFailedReclaims=this.subtractFromCount(this.localstorageNumberOfFailedReclaims,e.failedReclaims),this.localstorageNumberOfQueuesPurged=this.subtractFromCount(this.localstorageNumberOfQueuesPurged,e.localstorageQueuesPurged)}subtractFromCount(e,t){return Math.max(e-(t||0),0)}getMetricsPayload(){return{itemsDiscardedByRetry:this.itemsDiscardedByRetry,eventCount:this.eventCount,itemsDiscardedByOverflow:this.itemsDiscardedByOverflow,resilienceMechanism:this.resilienceMechanism,localstorageQueuesPurged:this.localstorageNumberOfQueuesPurged,fullReclaims:this.localstorageNumberOfFullReclaims,partialReclaims:this.localstorageNumberOfPartialReclaims,failedReclaims:this.localstorageNumberOfFailedReclaims}}}let Be=null;const $e=()=>(Be||(Be=new Ue),Be);class qe{constructor(e){"undefined"!=typeof window&&(window.addEventListener("offline",(()=>e(Fe.OFFLINE))),window.addEventListener("online",(()=>e(Fe.ONLINE))))}getNetworkStatus(){return window.navigator.onLine?Fe.ONLINE:Fe.OFFLINE}}let Ve=function(e){return e.IDLE="idle",e.RUNNING="running",e.COMPLETED="completed",e.TIMED_OUT="timedOut",e}({}),We=function(e){return e.EXECUTE="execute",e.COMPLETE="complete",e.TIMEOUT="timeout",e}({});class He{constructor(e){if((0,n.A)(this,"timeoutHandle",void 0),(0,n.A)(this,"callbackStatus",Ve.IDLE),!(e>0))throw new Error("CallbackWithTimeout requires timeout period higher than 0");this.timeoutPeriod=e}transitionCallbackStatus(e,t){switch(e){case Ve.IDLE:case Ve.TIMED_OUT:case Ve.COMPLETED:t===We.EXECUTE&&(this.callbackStatus=Ve.RUNNING);break;case Ve.RUNNING:switch(t){case We.COMPLETE:this.callbackStatus=Ve.COMPLETED;break;case We.TIMEOUT:this.callbackStatus=Ve.TIMED_OUT}break;default:this.callbackStatus=e}}executeCallbackWithTimeout(e,t,r){"undefined"!=typeof window&&(this.transitionCallbackStatus(this.callbackStatus,We.EXECUTE),this.timeoutHandle=window.setTimeout((()=>{this.transitionCallbackStatus(this.callbackStatus,We.TIMEOUT),r()}),this.timeoutPeriod),e((e=>{this.cancelTimeout(),this.getCallbackStatus()!==Ve.TIMED_OUT&&(this.transitionCallbackStatus(this.callbackStatus,We.COMPLETE),t(e))})))}getCallbackStatus(){return this.callbackStatus}cancelTimeout(){"undefined"!=typeof window&&this.timeoutPeriod>0&&this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=void 0)}}let Ke=function(e){return e[e.NOOP=0]="NOOP",e[e.SUCCESS=1]="SUCCESS",e[e.ERROR=2]="ERROR",e}({});const ze=1e3,Ge=3e4,Qe=2,Je=0,Xe=500,Ye=5e3;let Ze=function(e){return e[e.NONE=0]="NONE",e[e.IMMEDIATE=1]="IMMEDIATE",e[e.WAIT=2]="WAIT",e}({});class et{constructor(e,t){(0,n.A)(this,"schedule",(({immediate:e}={immediate:!1})=>{"undefined"!=typeof window&&(this.operationInFlight?e?this.queuedSchedule=Ze.IMMEDIATE:this.queuedSchedule!==Ze.IMMEDIATE&&(this.queuedSchedule=Ze.WAIT):(e||this.options.waitInterval<=0)&&0===this.failureCount?(this.clearTimeout(),this.run()):this.failureCount>0&&null===this.scheduledTimeout?this.scheduledTimeout=window.setTimeout(this.run,this.calculateBackoff()):null===this.scheduledTimeout&&(this.scheduledTimeout=window.setTimeout(this.run,this.options.waitInterval)))})),(0,n.A)(this,"stop",(()=>{this.clearTimeout(),this.queuedSchedule=Ze.NONE})),(0,n.A)(this,"getFailureCount",(()=>this.failureCount)),(0,n.A)(this,"getCallbackStatus",(()=>this.callbackTimer.getCallbackStatus())),(0,n.A)(this,"clearTimeout",(()=>{"undefined"!=typeof window&&null!==this.scheduledTimeout&&(window.clearTimeout(this.scheduledTimeout),this.scheduledTimeout=null)})),(0,n.A)(this,"run",(()=>{this.operationInFlight=!0,this.clearTimeout();try{this.callbackTimer.executeCallbackWithTimeout(this.callback,this.done,(()=>this.done(Ke.ERROR)))}catch(e){this.done(e)}})),(0,n.A)(this,"done",(e=>{this.operationInFlight=!1,e===Ke.ERROR||this.callbackTimer.getCallbackStatus()===Ve.TIMED_OUT?(this.failureCount++,this.clearTimeout()):e===Ke.SUCCESS&&(this.failureCount=0),this.processQueuedSchedule()})),(0,n.A)(this,"processQueuedSchedule",(()=>{if(this.queuedSchedule!==Ze.NONE){const e=this.queuedSchedule===Ze.IMMEDIATE;this.queuedSchedule=Ze.NONE,this.schedule({immediate:e})}else this.failureCount>0&&this.schedule()})),(0,n.A)(this,"calculateBackoff",(()=>{const{minRetryDelay:e,maxRetryDelay:t,backoffFactor:r,backoffJitterPercentage:n}=this.options;let s=e*r**this.failureCount;if(n){const e=Math.random(),t=Math.floor(e*n*s);Math.floor(10*e)<5?s-=t:s+=t}return Number(Math.min(s,t).toPrecision(1))})),this.options={minRetryDelay:e.minRetryDelay||ze,maxRetryDelay:e.maxRetryDelay||Ge,backoffFactor:e.backoffFactor||Qe,backoffJitterPercentage:e.backoffJitterPercentage||Je,waitInterval:void 0!==e.waitInterval?e.waitInterval:Xe,callbackTimeoutPeriod:e.callbackTimeoutPeriod||Ye},this.scheduledTimeout=null,this.failureCount=0,this.callback=t,this.operationInFlight=!1,this.queuedSchedule=Ze.NONE,this.callbackTimer=new He(this.options.callbackTimeoutPeriod)}}function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const nt=6e4,st={backoffFactor:0,backoffJitterPercentage:0,flushWaitMs:nt,minRetryDelay:nt,maxRetryDelay:nt},it=2,ot=.2,at=7,ct=!1,lt=500,ut=10,dt=1e3,pt=3e4,ht=1e3;class mt{constructor(e,t,r,n){this.queuePrefix=e,this.resilience=new Le(t,{logger:n,maxAttempts:null==r?void 0:r.maxAttempts,maxEventLimit:null==r?void 0:r.maxItems}),this.options=this.buildOptions(r),this.scheduler=new et(rt(rt({},this.options),{},{waitInterval:null!=r&&r.flushBeforeUnload?0:this.options.flushWaitMs}),this.scheduleCallback.bind(this)),this.longPollingScheduler=new et(rt(rt({},st),{},{waitInterval:st.flushWaitMs}),this.scheduleLongCallBack.bind(this)),this.metricsCollector=$e(),this.networkStatus=new qe((e=>{e===Fe.OFFLINE?this.scheduler.stop():this.checkEventCountAndReschedule()}))}start(e){this.batchFlushCallback=e,this.longPollingScheduler.schedule()}stop(){this.scheduler.stop(),this.longPollingScheduler.stop()}async addItem(e){const t=JSON.parse(JSON.stringify(e)),{numberOfEvictedItems:r}=await this.resilience.addItem(t,{},ue.EVICT);this.scheduler.schedule(),this.metricsCollector.addToEventCount(),r>0&&this.metricsCollector.addToItemsDiscardedByOverflowCounter(r)}getGlobalRetryCount(){return this.scheduler.getFailureCount()}async scheduleCallback(e){if(this.networkStatus.getNetworkStatus()!==Fe.OFFLINE)try{e(await this.resilience.processItems(this.flush.bind(this),this.options.batchFlushSize))}catch(t){if(t.name===me)return void e(Ke.ERROR)}finally{await this.checkEventCountAndReschedule()}else e(Ke.NOOP)}async checkEventCountAndReschedule(){const e=await this.resilience.getItemCount();e>0&&this.scheduler.schedule({immediate:e>=this.options.batchFlushSize})}async scheduleLongCallBack(e){const t=(e=>{if("string"!=typeof e||0===e.length)return 0;try{const t=Object.keys(localStorage).filter((t=>t&&t.startsWith(`${e}.`)||!1)).map((e=>e.split("."))).filter((e=>3===e.length&&X.includes(e[2]))).reduce(((e,t)=>{const[,r,n]=t;return void 0===e[r]&&(e[r]={}),e[r][n]=!0,e}),{}),r=Object.keys(t).filter((e=>!0!==t[e][G.ACK]));return r.forEach((t=>{const{queue:r,inProgress:n,reclaimStart:s,reclaimEnd:i}=J(e,t);localStorage.removeItem(n),localStorage.removeItem(r),localStorage.removeItem(s),localStorage.removeItem(i)})),r.length}catch(e){}return 0})(this.queuePrefix);this.metricsCollector.addToPurgedQueuesMetrics(t);const r=await ne(this.queuePrefix,(async e=>{const t=e.map((e=>({item:e.item,retryAttempts:e.attemptNumber,id:e.id}))),{items:r}=await this.resilience.bulkAddItem(t,ue.IGNORE);return r.length===t.length?{status:"successful"}:{status:"partial",acceptedItemIds:r.map((e=>e.id))}}));this.metricsCollector.addToReclaimMetrics(r),await this.checkEventCountAndReschedule(),e(Ke.SUCCESS),this.longPollingScheduler.schedule()}flush(e,t){this.metricsCollector.setResilienceMechanism(this.resilience.storeType());const{batchFlushCallback:r}=this;if(!r)throw new Error("batchFlushCallback has not been set. Call PullBatchableQueue#start first.");return new Promise(((n,s)=>{if(e.length<=0)return void n(Ke.NOOP);const i=e.map((e=>{const t=e.item;return e.retryAttempts>0&&t.msg&&(t.msg._metadata||(t.msg._metadata={}),t.msg._metadata.failedAttempts=e.retryAttempts),t}));r(i,(e=>{e?(t.numberOfDeletedItems>0&&this.metricsCollector.addToItemsDiscardedByRetryCounter(t.numberOfDeletedItems),s(e)):n(Ke.SUCCESS)}))}))}buildOptions(e){return{backoffFactor:(null==e?void 0:e.backoffFactor)||it,backoffJitterPercentage:void 0!==(null==e?void 0:e.backoffJitterPercentage)?e.backoffJitterPercentage:ot,batchFlushSize:(null==e?void 0:e.batchFlushSize)||at,flushBeforeUnload:(null==e?void 0:e.flushBeforeUnload)||ct,flushWaitMs:(null==e?void 0:e.flushWaitMs)||lt,maxItems:(null==e?void 0:e.maxItems)||dt,maxAttempts:(null==e?void 0:e.maxAttempts)||ut,maxRetryDelay:(null==e?void 0:e.maxRetryDelay)||pt,minRetryDelay:(null==e?void 0:e.minRetryDelay)||ht}}}let ft=function(e){return e.IDENTIFY="identify",e.PAGE="page",e.TRACK="track",e}({});function gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}async function bt(e,t){try{const r=await t;return e.map((e=>function(e,t){if(!(t&&t instanceof Function))return e;if(e.msg.type===ft.PAGE||e.msg.type===ft.TRACK){const r=t();r&&Array.isArray(r)&&(e.msg.properties=yt(yt({},e.msg.properties),{},{xid:r}))}else if(e.msg.traits&&e.msg.type===ft.IDENTIFY){const r=t();r&&Array.isArray(r)&&(e.msg.traits=yt(yt({},e.msg.traits),{},{xid:r}))}return e}(e,r)))}catch(t){return e}}var vt=r("./node_modules/memoize-one/dist/memoize-one.esm.js");function wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const Ct=async e=>{var t;const r=null===(t=_t(e))||void 0===t?void 0:t.signal,s=Ot(e.url),i=await fetch(e.url,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(e.batch),signal:r},s));if(429===i.status||i.status>=500&&i.status<600)throw new Error(`HTTP Error ${i.status} (${i.statusText})`);return i},_t=e=>{if(e.abortController)return e.abortController;if(e.timeout){const t=new AbortController;return setTimeout((()=>{t.abort()}),e.timeout),t}},Ot=(0,vt.A)((e=>new URL(e).origin===location.origin?{}:{mode:"cors",credentials:"include"}));var It=r("./node_modules/@babel/runtime/helpers/esm/typeof.js");function Et(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function At(e){Et(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,It.A)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function St(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function kt(e){Et(1,arguments);var t=At(e);return t.setHours(0,0,0,0),t}var jt=864e5;function Tt(e,t){var r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function Pt(e,t){Et(2,arguments);var r=At(e),n=At(t),s=Tt(r,n),i=Math.abs(function(e,t){Et(2,arguments);var r=kt(e),n=kt(t),s=r.getTime()-St(r),i=n.getTime()-St(n);return Math.round((s-i)/jt)}(r,n));r.setDate(r.getDate()-s*i);var o=s*(i-Number(Tt(r,n)===-s));return 0===o?0:o}var xt=r("./node_modules/@atlassiansox/analytics-web-client/node_modules/js-cookie/src/js.cookie.js"),Dt=r.n(xt);let Nt=function(e){return e.AWC_TLD_TEST="AWC_TLD_TEST",e.AWC_ANALYTICS_DEBUG="AWC_ANALYTICS_DEBUG",e.AJS_ANONYMOUS_ID="AJS_ANONYMOUS_ID",e}({});class Rt{constructor(e,t){this.key=e,this.options=t}getAttributes(){return this.options}getKey(){return this.key}}const Lt={[Nt.AWC_TLD_TEST]:new Rt("__awc_tld_test__",{expires:365,secure:"https:"===window.location.protocol,path:"/"}),[Nt.AWC_ANALYTICS_DEBUG]:new Rt("atlassian_analytics_debug",{expires:365,secure:"https:"===window.location.protocol,path:"/"}),[Nt.AJS_ANONYMOUS_ID]:new Rt("ajs_anonymous_id",{expires:365,secure:"https:"===window.location.protocol,path:"/"})};const Mt=new class{constructor(){(0,n.A)(this,"_data",{}),(0,n.A)(this,"length",0),(0,n.A)(this,"setItem",((e,t)=>(this._data[e]=t,this.length=Object.keys(this._data).length,t))),(0,n.A)(this,"getItem",(e=>e in this._data?this._data[e]:null)),(0,n.A)(this,"removeItem",(e=>(e in this._data&&delete this._data[e],this.length=Object.keys(this._data).length,null))),(0,n.A)(this,"clear",(()=>{this._data={},this.length=0})),(0,n.A)(this,"key",(e=>Object.keys(this._data)[e]))}},Ft="awcInMemoryStorageFallback";function Ut(e){const t="test_value";if(!e)return!1;try{const r="awc.storage.support";e.setItem(r,t);const n=e.getItem(r);return e.removeItem(r),n===t}catch(e){return!1}}class Bt{constructor(e,t={}){(0,n.A)(this,"getStore",(()=>this._store)),(0,n.A)(this,"getItem",(e=>this._store.getItem(this.createKey(e)))),(0,n.A)(this,"removeItem",(e=>this._store.removeItem(this.createKey(e)))),(0,n.A)(this,"setItem",((e,t)=>{try{this._store.setItem(this.createKey(e),t)}catch(r){(function(e){let t=!1;if(e.code)switch(e.code){case 22:t=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===e.name&&(t=!0)}else-2147024882===e.number&&(t=!0);return t})(r)&&(this.swapToInMemory(),this._store.setItem(this.createKey(e),t))}})),(0,n.A)(this,"swapToInMemory",(()=>{if(this._store===Mt||"undefined"==typeof window)return;const e=Object.keys(this._store||{});let t;Ut(window[Ft])?t=window[Ft]:(t=Mt,window[Ft]||(window[Ft]=Mt)),e.forEach((e=>{if(0===e.indexOf(this.getPrefix())){const r=this._store.getItem(e);r&&t.setItem(e,r)}})),this._store=t})),(0,n.A)(this,"clear",(()=>this._store.clear())),(0,n.A)(this,"key",(e=>this._store.key(e))),(0,n.A)(this,"getPrefix",(()=>this._prefix)),(0,n.A)(this,"createKey",(e=>this._prefix?`${this.getPrefix()}.${e}`:e)),this.options=t;const r=[];(void 0===t.useStoragePrefix||t.useStoragePrefix)&&r.push("awc"),t.envPrefix&&t.envPrefix!==o.sR.PROD&&r.push(t.envPrefix),this._prefix=r.join("-"),Ut(e)?this._store=e:this.swapToInMemory()}}const $t=class extends Bt{constructor(e){let t;try{t=window.localStorage||Mt}catch(e){t=Mt}super(t,e)}};class qt{constructor(){this.safeStorage=new $t({useStoragePrefix:!1})}set(e,t){return this.safeStorage.setItem(e,t),t}get(e){return this.safeStorage.getItem(e)||void 0}remove(e){this.safeStorage.removeItem(e)}}const Vt=Lt.AWC_TLD_TEST.getKey(),Wt="tld_test",Ht=(0,vt.A)((()=>{if("undefined"==typeof location)return"";const{hostname:e}=location,t=e.split(".");for(let e=1;e<=t.length;e++){const r=`.${t.slice(-1*e).join(".")}`;if(Dt().set(Vt,Wt,{domain:r}),Dt().get(Vt)===Wt)return Dt().remove(Vt,{domain:r}),r}return e}));function Kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class Gt{constructor(e){this.cookieLike=((e=!1)=>!e&&!("file:"===location.protocol||"chrome-extension:"===location.protocol))(e)?Dt():new qt}set(e,t,r){if(Lt[e])return this.cookieLike.set(Lt[e].getKey(),t,zt(zt({},Lt[e].getAttributes()),{},{domain:Ht()},r));console.warn(`Unknown cookie key ${e} provided, not set.`)}get(e){if(Lt[e])return this.cookieLike.get(Lt[e].getKey());console.warn(`Unknown cookie key ${e} provided, not fetched.`)}remove(e,t){Lt[e]?this.cookieLike.remove(Lt[e].getKey(),zt({},t)):console.warn(`Unknown cookie key ${e} provided, not removed.`)}}const Qt="SAFE",Jt="UNSAFE",Xt="NOT_FOUND",Yt="LOCAL_STORAGE";class Zt{constructor(e){this.store=new $t({useStoragePrefix:!1}),this.cookie=new Gt(e)}getUserId(){return this.userId||null}setUserId(e){this.userId=e}getAnonymousId(e){return this.getAnonymousIdFromLocalStorageAndUpdateCookieIfStale()||this.getAnonymousIdFromCookieAndUpdateLocalStorage()||this.generateNewAnonymousId(e)}setAnonymousId(e){const t=JSON.stringify(e);return this.cookie.set(Nt.AJS_ANONYMOUS_ID,t),this.lastAnonymousIdCookieUpdate=Date.now(),this.store.setItem(Lt.AJS_ANONYMOUS_ID.getKey(),t)}getAnonymousIdFromStorage(e){const t=e===Yt?this.store.getItem(Lt.AJS_ANONYMOUS_ID.getKey()):this.cookie.get(Nt.AJS_ANONYMOUS_ID);if(t){const e={type:Jt,anonymousId:t};try{const r=JSON.parse(t);return r&&"string"==typeof r?{type:Qt,anonymousId:r}:e}catch(t){return e}}return{type:Xt}}getAnonymousIdFromLocalStorageAndUpdateCookieIfStale(){const e=this.getAnonymousIdFromStorage(Yt);let t=!1;switch((!this.lastAnonymousIdCookieUpdate||Pt(new Date,new Date(this.lastAnonymousIdCookieUpdate))>=7)&&(t=!0),e.type){case Qt:return t&&this.setAnonymousId(e.anonymousId),e.anonymousId;case Jt:return e.anonymousId;default:return null}}getAnonymousIdFromCookieAndUpdateLocalStorage(){const e=this.getAnonymousIdFromStorage("COOKIE");switch(e.type){case Qt:case Jt:return this.store.setItem(Lt.AJS_ANONYMOUS_ID.getKey(),JSON.stringify(e.anonymousId)),e.anonymousId;default:return null}}generateNewAnonymousId(e=i()){const t=e();return this.setAnonymousId(t),t}}var er=r("./node_modules/@segment/isodate-traverse/lib/index.js"),tr=r.n(er);function rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const sr=e=>{const t=ir(e);return tr()(t)},ir=e=>{if(null===e||"object"!=typeof e)return e;const t={};return Object.keys(e).forEach((r=>{const n=or(e,r);void 0!==n&&(Array.isArray(n)?t[r]=n.map((e=>ir(e))):t[r]="object"==typeof n&&null!==n?ir(n):n)})),t},or=(e,t)=>e[t];function ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class lr{constructor(e){var t;(0,n.A)(this,"sendEvents",(async(e,t)=>{const r=this.resilienceQueue.getGlobalRetryCount(),n=this.metrics.getMetricsPayload(),s=cr(cr({},n),{},{httpRetryCount:r});for(let e in s)0===s[e]&&delete s[e];const i=await this.attachXIDs(e),o=(new Date).toISOString(),a={batch:i.map((e=>(e.msg.sentAt=o,e.msg))),sentAt:o,metadata:s};try{const e=await Ct({url:this.gasv3BatchUrl,batch:a,timeout:this.options.requestTimeout});this.metrics.subtractFromMetrics(n),t(null,e)}catch(e){t(e,null)}})),this.options=cr(cr({},e),{},{requestTimeout:e.requestTimeout||1e4,retryQueueOptions:e.retryQueueOptions||{},logger:e.logger||console,disableCookiePersistence:e.disableCookiePersistence||!1}),this.user=new Zt(null===(t=this.options)||void 0===t?void 0:t.disableCookiePersistence),this.xidPromiseCallback=e.xidPromiseGetter(),this.gasv3BatchUrl=`${e.apiHostProtocol}://${e.apiHost}/batch`,this.metrics=$e(),this.resilienceQueue=((e,t,r,n)=>new mt(e,t,r||{},n))(e.retryQueuePrefix,e.product,this.options.retryQueueOptions,this.options.logger),this.resilienceQueue.start(this.sendEvents)}getUser(){return this.user}async track(e,t,r,n){const s=cr(cr({},this.buildBaseEvent(r,ft.TRACK,t)),{},{type:ft.TRACK,properties:sr(t),event:e}),i=cr(cr({},s),{},{messageId:this.createMessageId()}),o=this.packageEvent(i);await this.resilienceQueue.addItem(o),n&&n()}async page(e,t,r,n){const s=cr(cr({},this.buildBaseEvent(r,ft.PAGE,t)),{},{type:ft.PAGE,properties:sr(t),name:e}),i=cr(cr({},s),{},{messageId:this.createMessageId()}),o=this.packageEvent(i);await this.resilienceQueue.addItem(o),n&&n()}async identify(e,t,r,n){const s=cr(cr({},this.buildBaseEvent(r,ft.IDENTIFY,t)),{},{type:ft.IDENTIFY,traits:sr(t)}),i=cr(cr({},s),{},{messageId:this.createMessageId()}),o=this.packageEvent(i);await this.resilienceQueue.addItem(o),n&&n()}buildBaseEvent(e,t,r){const n=(e=>nr(nr({},e.context),{},{userAgent:navigator.userAgent}))(sr(e));return{context:n,timestamp:(new Date).toISOString(),type:t,userId:this.user.getUserId(),anonymousId:r.anonymousId||this.user.getAnonymousId()}}createMessageId(){return`ajs-${i()()}`}packageEvent(e){const{apiHost:t,apiHostProtocol:r}=this.options;return{headers:{"Content-Type":"text/plain"},msg:e,url:`${r}://${t}/${e.type.charAt(0)}`}}async attachXIDs(e){return this.xidPromiseCallback?bt(e,this.xidPromiseCallback):Promise.resolve(e)}}var ur=r("./node_modules/query-string/index.js");const dr=e=>window.history.replaceState({},"",e),pr=(e,t=dr)=>{const r=window.location.href,n=window.location.hash,s=""!==n?r.replace(n,""):r,{url:i,query:o}=(0,ur.parseUrl)(s),a=(c=o,l=e,Object.keys(c).filter((e=>l(c[e],e))).reduce(((e,t)=>(e[t]=c[t],e)),{}));var c,l;if(Object.keys(a).length>0){const r=((e,t)=>Object.keys(e).filter((r=>!t(e[r],r))).reduce(((t,r)=>(t[r]=e[r],t)),{}))(o,e);if(Object.keys(r).length>0){t(`${i}?${(0,ur.stringify)(r)}${n}`)}else t(`${i}${n}`)}return a};class hr{constructor(){(0,n.A)(this,"handleOriginParameters",((e,t)=>{const r=Object.keys(e);if(!(r.length>0))throw new Error("Empty parameter mapping provided");const n=r.filter((e=>Object.values(o.D0).indexOf(e)<0));if(n.length>0)throw new Error(`Invalid Origin Tracing Parameter(s) supplied: ${n.join()}!`);const s=pr(((e,t)=>r.indexOf(t)>=0),t);return Object.keys(s).map((t=>({[t]:e[t](s[t])}))).reduce(((e,t)=>Object.assign(e,t)),{})})),this._originStore={}}}const mr="/gateway/api/gasv3/api/v1",fr=({useStargate:e,env:t,useLegacyUrl:r,envOverride:n})=>{if(t===o.sR.LOCAL||t===o.sR.DEV)throw Error("No LOCAL or DEV environments for FedRAMP.");if(t===o.sR.PROD&&n)throw Error("Cannot override to FedRAMP Sandbox for Prod.");return e?r?t===o.sR.PROD?"api.atlassian-us-gov-mod.com/gasv3/api/v1":(e=>e&&e===o.Hb.FEDRAMP_MODERATE_SANDBOX?"api-private.atlassian-fex.com/gasv3/api/v1":"api.stg.atlassian-us-gov-mod.com/gasv3/api/v1")(n):window.location.host+mr:t===o.sR.PROD?"as.atlassian-us-gov-mod.com/api/v1":(e=>e&&e===o.Hb.FEDRAMP_MODERATE_SANDBOX?"as.atlassian-fex.com/api/v1":"as.staging.atl-paas-us-gov-mod.net/api/v1")(n)};function gr({useStargate:e,env:t,useLegacyUrl:r,perimeter:n,envOverride:s}){return n===o.KW.FEDRAMP_MODERATE?fr({useStargate:e,env:t,useLegacyUrl:r,envOverride:s}):(({useStargate:e,env:t,useLegacyUrl:r})=>e?r?t===o.sR.PROD?"api-private.atlassian.com/gasv3/api/v1":"api-private.stg.atlassian.com/gasv3/api/v1":window.location.host+mr:t===o.sR.PROD?"as.atlassian.com/api/v1":"as.staging.atl-paas.net/api/v1")({useStargate:e,env:t,useLegacyUrl:r})}const yr="session.id",br="session.expiry",vr=/^\d+$/,wr=()=>{};class Cr{constructor(e={}){(0,n.A)(this,"_generateNewSessionId",(()=>{const e=Date.now().toString();return this._safeLocalStorage.setItem(yr,e),this._onNewSessionStarted&&this._onNewSessionStarted(),e})),(0,n.A)(this,"_updateSessionExpiry",(()=>{const e=Date.now()+this._sessionExpiryTime;return this._safeLocalStorage.setItem(br,e.toString()),e})),(0,n.A)(this,"_debouncedUpdateSessionExpiry",(e=>{const{_updateSessionExpiry:t}=this;if(e<Date.now()+this._sessionExpiryDebounceThresholdPercentage*this._sessionExpiryTime)return t();this._sessionExpiryDebounceTimer&&clearTimeout(this._sessionExpiryDebounceTimer),this._sessionExpiryDebounceTimer=setTimeout((()=>{t()}),this._sessionExpiryDebounce)})),this._sessionExpiryTime=e.sessionExpiryTime||18e5,this._sessionExpiryDebounce=e.sessionExpiryDebounce||5e3,this._sessionExpiryDebounceThresholdPercentage=e.sessionExpiryDebounceThresholdPercentage||.9,this._onNewSessionStarted=e.onNewSessionStarted?e.onNewSessionStarted:wr,this._safeLocalStorage=new $t}getCurrentSessionId(){const e=this._safeLocalStorage.getItem(yr),t=parseInt(this._safeLocalStorage.getItem(br)||"0",10)||0;return this._debouncedUpdateSessionExpiry(t),!e||t<=Date.now()||Number.isNaN(t)?this._generateNewSessionId():vr.test(e)?e:this._generateNewSessionId()}}const _r=class extends Bt{constructor(e){let t;try{t=window.sessionStorage||Mt}catch(e){t=Mt}super(t,e)}},Or="tab.id";class Ir{constructor(){(0,n.A)(this,"_generateNewTabId",(()=>{const e=i()();return this._safeSessionStorage.setItem(Or,e),e})),this._safeSessionStorage=new _r}getCurrentTabId(){let e=this._safeSessionStorage.getItem(Or);return e||(e=this._generateNewTabId()),e}}function Er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Er(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Sr="taskSessions",kr="taskSessionsInit",jr="awc.";class Tr{constructor(){(0,n.A)(this,"_taskSessionsNotRecentlyInitialised",(e=>null===this._safeSessionStorage.getItem(Sr)||null===this._safeSessionStorage.getItem(kr)||parseInt(this._safeSessionStorage.getItem(kr)||"0",10)<e-3e3)),(0,n.A)(this,"_removeTaskSessionPrefix",((e,t)=>t.split(jr)[1])),(0,n.A)(this,"_isTaskSessionQueryParam",((e,t)=>t.startsWith(jr))),(0,n.A)(this,"getAllTaskSessions",(()=>{try{return JSON.parse(this._safeSessionStorage.getItem(Sr)||"")}catch(e){return{}}})),(0,n.A)(this,"_writeToSessionStorage",(e=>{try{this._safeSessionStorage.setItem(Sr,JSON.stringify(e))}catch(e){}})),(0,n.A)(this,"_appendTaskSessions",(e=>{const t=this.getAllTaskSessions(),r=null===t?e:Object.assign(t,e);this._writeToSessionStorage(r)})),(0,n.A)(this,"_safelyRemoveKey",((e,t)=>null===e?{}:(delete e[t],e))),(0,n.A)(this,"createTaskSession",(e=>{const t=i()(),r={};return r[e]=t,this._appendTaskSessions(r),t})),(0,n.A)(this,"createTaskSessionWithProvidedId",((e,t)=>{if("string"!=typeof t)throw new TypeError("invalid taskSessionId, must be string");const r={};r[e]=t,this._appendTaskSessions(r)})),(0,n.A)(this,"completeTaskSession",(e=>{const t=this.getAllTaskSessions(),r=this._safelyRemoveKey(t,e);this._writeToSessionStorage(r)})),(0,n.A)(this,"formatTaskSessionQueryString",(({uri:e,includedTaskSessions:t})=>{const{url:r,query:n}=(0,ur.parseUrl)(e),s=this.getAllTaskSessions(),i=t?(a=s,t.reduce(((e,t)=>(t in a&&(e[t]=a[t]),e)),{})):N(s,Object.values(o.D0));var a;if(0===Object.keys(i).length)return e;const c=Ar(Ar({},D(i,((e,t)=>jr+t))),n);return`${r}?${(0,ur.stringify)(c)}`})),(0,n.A)(this,"stripQueryParameters",(()=>{const e=D(pr(this._isTaskSessionQueryParam),this._removeTaskSessionPrefix);this._appendTaskSessions(e)}));const e=Date.now();this._safeSessionStorage=new _r;try{this._taskSessionsNotRecentlyInitialised(e)&&(this._writeToSessionStorage({}),this._safeSessionStorage.setItem(kr,e.toString()))}catch(e){}}}const Pr=Lt.AWC_ANALYTICS_DEBUG.getKey(),xr="synthetic";const Dr=class{constructor(){(0,n.A)(this,"_bind",(()=>{"undefined"==typeof window||window.testAnalytics||(window.testAnalytics={eventCache:[],events:()=>window.testAnalytics.eventCache,clear:()=>{window.testAnalytics.eventCache=[];try{localStorage.removeItem("awc.ui.viewed.last.sent"),localStorage.removeItem("awc-staging.ui.viewed.last.sent"),localStorage.removeItem("awc-dev.ui.viewed.last.sent"),localStorage.removeItem("awc-local.ui.viewed.last.sent")}catch(e){}}})})),(0,n.A)(this,"_cache",(e=>{"undefined"!=typeof window&&(window.testAnalytics.eventCache.length>=100&&(window.testAnalytics.eventCache=window.testAnalytics.eventCache.slice(1,window.testAnalytics.eventCache.length)),window.testAnalytics.eventCache.push(e))})),(0,n.A)(this,"_shouldCacheEvent",(()=>this._isDebugCookieEnabled)),(0,n.A)(this,"saveEvent",(e=>{e&&this._shouldCacheEvent()&&(window.testAnalytics||this._bind(),e.tags instanceof Array?e.tags.push(xr):e.tags=[xr],this._cache(e))})),this._isDebugCookieEnabled=(()=>{try{return JSON.parse(Dt().get(Pr)||"false")}catch(e){Dt().remove(Pr)}return!1})(),this._isDebugCookieEnabled&&this._bind()}},Nr=["embeddedProduct"];function Rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class Mr{constructor(e,t,r,s={}){if((0,n.A)(this,"start",(()=>{this._startInterval(),this._bindEventListeners()})),(0,n.A)(this,"stop",(()=>{this._stopInterval(),this._unbindEventListeners()})),(0,n.A)(this,"resetTimers",(()=>{this._intervalId&&(this.stop(),this.start())})),(0,n.A)(this,"_bindEventListeners",(()=>{"undefined"!=typeof window&&(window.addEventListener("focus",this._focusListener),window.addEventListener("blur",this._blurListener))})),(0,n.A)(this,"_unbindEventListeners",(()=>{"undefined"!=typeof window&&(window.removeEventListener("focus",this._focusListener),window.removeEventListener("blur",this._blurListener))})),(0,n.A)(this,"_startInterval",(()=>{clearInterval(this._intervalId),this._intervalId=setInterval(this._handleInterval,this._delay)})),(0,n.A)(this,"_stopInterval",(()=>{this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)})),(0,n.A)(this,"_getProductKey",((e,t)=>{let r=e;return t&&(r+=`-${t}`),r})),(0,n.A)(this,"_getLastSentTimestamp",((e,t,r)=>(((this._parseLocalStorageData()||{})[r]||{})[t]||{})[e]||null)),(0,n.A)(this,"_parseLocalStorageData",(()=>{const e=this._safeLocalStorage.getItem(this._storageKey);try{return JSON.parse(e||"")}catch(e){return this._safeLocalStorage.removeItem(this._storageKey),null}})),(0,n.A)(this,"_setLastSentTimestamp",((e,t,r)=>{const n=this._parseLocalStorageData()||{},s=n[r]||{},i=s[t]||{};i[e]=Date.now(),s[t]=i,n[r]=s,this._safeLocalStorage.setItem(this._storageKey,JSON.stringify(n))})),(0,n.A)(this,"_shouldSendEvent",((e,t,r,n)=>{if(!document.hasFocus())return!1;if(t!==o.v7.NONE&&!r||!n)return!1;return Date.now()-this._getLastSentTimestamp(e,r,n)>this._throttle})),(0,n.A)(this,"_handleInterval",(()=>{const e=this._getContext(),{embeddedProduct:t}=e,r=(0,ve.A)(e,Nr);this._sendEvent(this._product,r),t&&this._sendEvent(t,r,!0)})),(0,n.A)(this,"_sendEvent",((e,t,r=!1)=>{const{subproduct:n,tenantIdType:s,tenantId:i,userId:o,lastScreenEvent:a,attributes:c}=t,l=this._getProductKey(e,n);if(this._shouldSendEvent(l,s,i,o)){this._setLastSentTimestamp(l,i,o);const t=this._createEvent(e,n,r,a,c);this._onEvent(t)}})),(0,n.A)(this,"_createEvent",((e,t,r,n,s)=>{const i={product:e,source:"ui",action:"viewed",actionSubject:"ui",attributes:s};return r&&(i.subproduct=null,i.version=null,i.attributes=Lr(Lr({},i.attributes),{},{embeddedInEnv:this._productInfo.env,embeddedInProduct:this._productInfo.product,embeddedInSubproduct:t,embeddedInVersion:this._productInfo.version,embeddedInOrigin:this._productInfo.origin,embeddedInPlatform:this._productInfo.platform})),n&&(i.attributes=Lr(Lr({},i.attributes),{},{lastScreenEvent:{name:n.name,attributes:n.attributes}})),i})),!e)throw new Error("Missing productInfo");if(!e.product)throw new Error("Missing productInfo.product");if(!t)throw new Error("Missing getContext callback");if("function"!=typeof t)throw new Error("Invalid getContext, must be function");if(!r)throw new Error("Missing onEvent callback");if("function"!=typeof r)throw new Error("Invalid onEvent, must be function");this._productInfo=e,this._product=e.product,this._getContext=t,this._onEvent=r,this._delay=s.delay||2e3,this._throttle=s.throttle||36e5,this._storageKey=s.storageKey||"ui.viewed.last.sent",this._safeLocalStorage=new $t({envPrefix:this._productInfo.env}),this._focusListener=()=>{this._startInterval()},this._blurListener=()=>{this._stopInterval()}}}function Fr(e,t){return e&&"function"==typeof e?()=>{e(t)}:null}let Ur=function(e){return e.XC="xc",e.UID="uid",e}({});const Br=(e,t)=>{if(e&&t&&"function"==typeof t){const e=()=>new Promise((e=>{setTimeout((()=>e((()=>[{type:Ur.XC,state:"TIMEOUT"},{type:Ur.UID,state:"TIMEOUT"}]))),5e3)})),r=()=>t().catch((()=>()=>[{type:Ur.XC,state:"UNKNOWN"},{type:Ur.UID,state:"UNKNOWN"}]));return Promise.race([r(),e()])}};function $r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$r(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$r(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Vr="last.screen.event";class Wr{constructor(e,t={}){if((0,n.A)(this,"_useStargate",(e=>null==e||e)),(0,n.A)(this,"_endsWith",((e,t)=>-1!==e.indexOf(t,e.length-t.length))),(0,n.A)(this,"_changeInternalUserId",((e,t)=>{this.eventProcessor.getUser().setUserId(e),t&&t!==this.eventProcessor.getUser().getAnonymousId()&&this.eventProcessor.getUser().setAnonymousId(t)})),(0,n.A)(this,"_createSubproductGetter",(e=>p(e,"Cannot get subproduct from the callback. Proceeding without it."))),(0,n.A)(this,"_createEmbeddedProductGetter",(e=>p(e,"Cannot get embeddedProduct from the callback. Proceeding without it."))),(0,n.A)(this,"_getLastScreenEvent",(()=>{try{return JSON.parse(this._safeSessionStorage.getItem(Vr)||"")}catch(e){return this._safeSessionStorage.removeItem(Vr),null}})),(0,n.A)(this,"_setLastScreenEvent",(e=>{this._safeSessionStorage.setItem(Vr,JSON.stringify({name:e.name,attributes:e.attributes}))})),(0,n.A)(this,"_shouldEventBeDelayed",(e=>{if(!e.tags||-1===e.tags.indexOf("measurement"))return!1;const t=!1!==e.highPriority;return this.eventDelayQueue.isDelayingLowPriorityEvents()&&!t})),(0,n.A)(this,"_fireEvent",((e,t,r,n)=>{switch(t.eventType){case o.$q.UI:case o.$q.OPERATIONAL:case o.$q.TRACK:return this.eventProcessor.track(e,t,r,n);case o.$q.SCREEN:return this.eventProcessor.page(e,t,r,n);case o.$q.IDENTIFY:return this.eventProcessor.identify(e,t,r,n);default:throw new Error(`No handler has been defined for events of type ${t.eventType}`)}})),(0,n.A)(this,"_fireDelayedEvent",((e,t,r,n)=>{try{this._changeInternalUserId(n.userId,n.anonymousId),t.tags=[...t.tags||[],"sentWithDelay"],this._fireEvent(e,t,r,void 0)}finally{this._changeInternalUserId(this._userInfo.userId,this._userInfo.anonymousId)}})),(0,n.A)(this,"_delayEvent",((e,t,r,n,s)=>{this.eventDelayQueue.push(e,t,r,n),s&&s()})),(0,n.A)(this,"_processEvent",((e,t,r,n)=>(this._testingCache.saveEvent(t),this._shouldEventBeDelayed(t)?(this._delayEvent(e,t,r,this._userInfo,n),Promise.resolve()):this._fireEvent(e,t,r,n)))),(0,n.A)(this,"setEmbeddedProduct",(e=>{this._productInfo.embeddedProduct=this._createEmbeddedProductGetter(e),this.resetUIViewedTimers()})),(0,n.A)(this,"clearEmbeddedProduct",(()=>{this._productInfo.embeddedProduct=this._createEmbeddedProductGetter(null)})),(0,n.A)(this,"setSubproduct",(e=>{this._productInfo.subproduct=this._createSubproductGetter(e),this.resetUIViewedTimers()})),(0,n.A)(this,"setOriginTracingHandlers",(e=>{const t=this.originTracing.handleOriginParameters(e,this._historyReplaceFn);Object.keys(t).forEach((e=>{void 0!==t[e].taskSessionId&&this.task.createTaskSessionWithProvidedId(e,t[e].taskSessionId)}));const r={};return Object.keys(t).forEach((e=>{t[e].originTracingAttributes?r[e]=t[e].originTracingAttributes:console.warn(`Handling method for origin parameter ${e} has not returned any attributes`)})),Object.keys(t).length>0?this.sendOperationalEvent({action:"landed",actionSubject:"origin",source:"webClient",attributes:{originTracesLanded:r}},(()=>{})):Promise.resolve()})),(0,n.A)(this,"setTenantInfo",((e,t)=>{if(!e)throw new Error("Missing tenantIdType");if(e!==o.v7.NONE&&!t)throw new Error("Missing tenantId");if(!(0,o.Xj)(o.v7,e))throw new Error(`Invalid tenantIdType '${e}', must be an tenantType: [${(0,o.KQ)(o.v7)}]`);this._tenantInfo={tenantIdType:e,tenantId:t}})),(0,n.A)(this,"clearTenantInfo",(()=>{this._tenantInfo={}})),(0,n.A)(this,"setOrgInfo",(e=>{if(!e)throw new Error("Missing orgId");this._orgInfo={orgId:e}})),(0,n.A)(this,"clearOrgInfo",(()=>{this._orgInfo={}})),(0,n.A)(this,"setWorkspaceInfo",(e=>{if(!e)throw new Error("Missing workspaceId");this._workspaceInfo={workspaceId:e}})),(0,n.A)(this,"clearWorkspaceInfo",(()=>{this._workspaceInfo={}})),(0,n.A)(this,"setUserInfo",((e,t)=>{!function(e,t){if(!e)throw new Error("Missing userIdType");if(!t)throw new Error("Missing userId");if(!(0,o.Xj)(o.Of,e))throw new Error(`Invalid userIdType '${e}', must be an userType: [${(0,o.KQ)(o.Of)}]`)}(e,t),this._changeInternalUserId(t),this._userInfo={userIdType:e,userId:t,anonymousId:this.eventProcessor.getUser().getAnonymousId()}})),(0,n.A)(this,"clearUserInfo",(()=>{this._changeInternalUserId(void 0),this._userInfo={anonymousId:this.eventProcessor.getUser().getAnonymousId()}})),(0,n.A)(this,"setAlias",((e,t)=>{if(!e)throw new Error("Missing aliasType");if(!(0,o.Xj)(o.VD,e))throw new Error(`Invalid aliasType '${e}', must be an aliasType: [${(0,o.KQ)(o.VD)}]`);this._aliases[e]=t})),(0,n.A)(this,"clearAlias",(()=>{this._aliases={}})),(0,n.A)(this,"setGroup",((e,t)=>{if(!e)throw new Error("Missing groupType");if(!(0,o.Xj)(o.iU,e))throw new Error(`Invalid groupType '${e}', must be an groupType: [${(0,o.KQ)(o.iU)}]`);this._groups[e]=t})),(0,n.A)(this,"clearGroup",(()=>{this._groups={}})),(0,n.A)(this,"getAnonymousId",(()=>this._userInfo.anonymousId)),(0,n.A)(this,"setUIViewedAttributes",(e=>{if(!e)throw new Error("Missing uiViewedAttributes");if("object"!=typeof e||Array.isArray(e))throw new Error("Invalid uiViewedAttributes type, should be a non array object");this._uiViewedAttributes=qr({},e)})),(0,n.A)(this,"getUIViewedAttributes",(()=>this._uiViewedAttributes)),(0,n.A)(this,"clearUIViewedAttributes",(()=>{this._uiViewedAttributes={}})),(0,n.A)(this,"sendIdentifyEvent",((e,t,r)=>{this.setUserInfo(e,t);const n={userIdType:e,eventType:o.$q.IDENTIFY};return this._processEvent(t,n,this._context,r)})),(0,n.A)(this,"sendPageEvent",((e,t)=>this.sendScreenEvent(e,t))),(0,n.A)(this,"sendScreenEvent",((e,t,r)=>{let n,s,i,o;"object"==typeof e?(n=e.name,s=e.attributes,i=e.containers,o=e.tags):(n=e,s=r),function(e){if(!e)throw new Error("Missing name")}(n),F(i);const a=qr({name:n},T(this._productInfo,this._tenantInfo,this._userInfo,s,e.nonPrivacySafeAttributes,o,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,e,i,this._aliases,this._groups));return this._setLastScreenEvent(a),this._processEvent(n,a,this._context,Fr(t,a))})),(0,n.A)(this,"sendTrackEvent",((e,t)=>{!function(e){B(e)}(e);const r=x(this._productInfo,this._tenantInfo,this._userInfo,e,o.$q.TRACK,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent(P(e),r,this._context,Fr(t,r))})),(0,n.A)(this,"sendUIEvent",((e,t)=>{!function(e){B(e)}(e);const r=x(this._productInfo,this._tenantInfo,this._userInfo,e,o.$q.UI,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent(P(e),r,this._context,Fr(t,r))})),(0,n.A)(this,"sendOperationalEvent",((e,t)=>{!function(e){B(e)}(e);const r=x(this._productInfo,this._tenantInfo,this._userInfo,e,o.$q.OPERATIONAL,this._tabTracking.getCurrentTabId(),this._sessionTracking.getCurrentSessionId(),this.task.getAllTaskSessions(),this._orgInfo,this._pageLoadId,this._workspaceInfo,this._aliases,this._groups);return this._processEvent(P(e),r,this._context,Fr(t,r))})),(0,n.A)(this,"startUIViewedEvent",(e=>{this.stopUIViewedEvent(),this._uiViewedEvent=new Mr(this._productInfo,(()=>({embeddedProduct:this._productInfo.embeddedProduct(),subproduct:this._productInfo.subproduct(),tenantIdType:this._tenantInfo.tenantIdType,tenantId:this._tenantInfo.tenantId,userId:this._userInfo.userId,lastScreenEvent:this._getLastScreenEvent(),attributes:this._uiViewedAttributes})),(t=>this.sendUIEvent(t,e))),this._uiViewedEvent.start()})),(0,n.A)(this,"stopUIViewedEvent",(()=>{this._uiViewedEvent&&(this._uiViewedEvent.stop(),this._uiViewedEvent=null)})),(0,n.A)(this,"resetUIViewedTimers",(()=>{this._uiViewedEvent&&this._uiViewedEvent.resetTimers()})),(0,n.A)(this,"startApdexEvent",(e=>{this._apdexEvent.start(e)})),(0,n.A)(this,"getApdexStart",(e=>this._apdexEvent.getStart(e))),(0,n.A)(this,"stopApdexEvent",((e,t)=>{this._apdexEvent.stop(e,t)})),(0,n.A)(this,"startLowPriorityEventDelay",((e,t)=>{this.eventDelayQueue.startLowPriorityEventDelay(e,t)})),(0,n.A)(this,"stopLowPriorityEventDelay",(()=>{this.eventDelayQueue.stopLowPriorityEventDelay()})),(0,n.A)(this,"onEvent",((e,t)=>{if(!t)throw new Error("Missing analyticsData");if(!t.eventType)throw new Error("Missing analyticsData.eventType");if(t.eventType===o.$q.TRACK)return this.sendTrackEvent(t);if(t.eventType===o.$q.UI)return this.sendUIEvent(t);if(t.eventType===o.$q.OPERATIONAL)return this.sendOperationalEvent(t);if(t.eventType===o.$q.SCREEN)return this.sendScreenEvent(t.name,null,t.attributes);if(t.eventType===o.$q.IDENTIFY)return this.sendIdentifyEvent(t.userIdType,t.userId);throw new Error(`Invalid analyticsData.eventType '${t.eventType}', must be an eventType: [${(0,o.KQ)(o.$q)}]`)})),!e)throw new Error("Missing productInfo");if(!e.env)throw new Error("Missing productInfo.env");if(!e.product)throw new Error("Missing productInfo.product");if(!(0,o.Xj)(o.sR,e.env))throw new Error(`Invalid productInfo.env '${e.env}', must be an envType: [${(0,o.KQ)(o.sR)}]`);if(e.perimeter&&!(0,o.Xj)(o.KW,e.perimeter))throw new Error(`Invalid productInfo.perimeter '${e.perimeter}', must be an perimeterType: [${(0,o.KQ)(o.KW)}]`);if(e.origin){if(!(0,o.Xj)(o.VH,e.origin))throw new Error(`Invalid productInfo.origin '${e.origin}', must be an originType: [${(0,o.KQ)(o.VH)}]`)}else e.origin=o.VH.WEB;e.platform?function(e){if(!(0,o.Xj)(o.AQ,e.platform))throw new Error(`Invalid productInfo.platform '${e.platform}', must be a platformType: [${(0,o.KQ)(o.AQ)}]`);if(e.origin===o.VH.DESKTOP&&!(0,o.Xj)(o.vB,e.platform))throw new Error(`Invalid productInfo.platform '${e.platform}', must be one of [mac, linux, windows]`);if(e.origin===o.VH.WEB&&!(0,o.Xj)(o.LK,e.platform))throw new Error(`Invalid productInfo.platform '${e.platform}', must be one of [web, mobileWeb]`)}(e):e.platform=e.origin===o.VH.WEB?o.AQ.WEB:o.AQ.DESKTOP,this.logger=t.logger||console,this._productInfo=qr(qr({},e),{},{subproduct:this._createSubproductGetter(e.subproduct),embeddedProduct:this._createEmbeddedProductGetter(e.embeddedProduct)}),this._tenantInfo={},this._orgInfo={},this._uiViewedAttributes={},this._context=function(e){const t=window.screen||{};return{context:{locale:e.locale,screen:{width:t.width,height:t.height,density:window.devicePixelRatio},library:{name:"analytics.js",version:"4.23.0"}}}}(this._productInfo),this._safeSessionStorage=new _r;const r=this._useStargate(t.useStargate),s=t.apiHost||gr({useStargate:r,env:e.env,useLegacyUrl:t.useLegacyUrl,perimeter:e.perimeter,envOverride:e.envOverride}),c=t.apiHostProtocol||"https",l={maxRetryDelay:6e4,minRetryDelay:t.minRetryDelay||1e3,backoffFactor:2,flushWaitMs:t.flushWaitInterval,flushBeforeUnload:t.flushBeforeUnload},u=`awc-${e.env}`,h=t.disableCookiePersistence||!1;this.eventProcessor=new lr({apiHost:s,apiHostProtocol:c,product:e.product,retryQueuePrefix:u,retryQueueOptions:l,xidPromiseGetter:()=>Br(t.xidConsent,t.xidPromiseFn),logger:this.logger,disableCookiePersistence:h}),this._userInfo={anonymousId:this.eventProcessor.getUser().getAnonymousId(null==t?void 0:t.customAnonymousIdGenerator)},this._pageVisibility=new a,this._tabTracking=new Ir,this._sessionTracking=new Cr({sessionExpiryTime:t.sessionExpiryTime,onNewSessionStarted:t.onNewSessionStarted}),this.task=new Tr,this.originTracing=new hr,this._apdexEvent=new d(this.sendOperationalEvent,this._pageVisibility),this._historyReplaceFn="function"==typeof t.historyReplaceFn?t.historyReplaceFn:dr,this.eventDelayQueue=new z(this._fireDelayedEvent,t.delayQueueCompressors||[]),this._testingCache=new Dr,this._pageLoadId=i()(),this._workspaceInfo={},this._aliases={},this._groups={}}}},"./node_modules/@atlassiansox/analytics-web-client/dist/esm/analyticsWebTypes.js":(e,t,r)=>{"use strict";r.d(t,{$q:()=>s,AQ:()=>i,D0:()=>p,Hb:()=>b,KQ:()=>h,KW:()=>f,LK:()=>d,LR:()=>l,Of:()=>c,VD:()=>g,VH:()=>o,Xj:()=>m,iU:()=>y,sR:()=>n,v7:()=>a,vB:()=>u});let n=function(e){return e.LOCAL="local",e.DEV="dev",e.STAGING="staging",e.PROD="prod",e}({}),s=function(e){return e.TRACK="track",e.UI="ui",e.OPERATIONAL="operational",e.SCREEN="screen",e.IDENTIFY="identify",e}({}),i=function(e){return e.MAC="mac",e.LINUX="linux",e.WINDOWS="windows",e.DESKTOP="desktop",e.WEB="web",e.MOBILE_WEB="mobileWeb",e}({}),o=function(e){return e.DESKTOP="desktop",e.WEB="web",e}({}),a=function(e){return e.CLOUD_ID="cloudId",e.ORG_ID="orgId",e.OPSGENIE_CUSTOMER_ID="opsgenieCustomerId",e.HALP_TEAM_ID="halpTeamId",e.TRANSACTION_ACCOUNT_ID="transactionAccountId",e.TRELLO_WORKSPACE_ID="trelloWorkspaceId",e.NONE="none",e}({}),c=function(e){return e.ATLASSIAN_ACCOUNT="atlassianAccount",e.HASHED_EMAIL="hashedEmail",e.TRELLO="trello",e.OPSGENIE="opsgenie",e.HALP="halp",e}({}),l=function(e){return e.TRANSITION="transition",e.INITIAL_LOAD="initialLoad",e}({});const u=Object.freeze([i.DESKTOP,i.MAC,i.LINUX,i.WINDOWS]),d=Object.freeze([i.WEB,i.MOBILE_WEB]);let p=function(e){return e.ATL_ORIGIN="atlOrigin",e}({});function h(e){return Object.values(e)}function m(e,t){return Object.values(e).indexOf(t)>-1}let f=function(e){return e.C5="c5",e.COMMERCIAL="commercial",e.FEDRAMP_MODERATE="fedramp-moderate",e.FEDRAMP_HIGH="fedramp-high",e}({}),g=function(e){return{}}(),y=function(e){return e.TRANSACTION_ACCOUNT_ID="transactionAccountId",e}({}),b=function(e){return e.FEDRAMP_MODERATE_SANDBOX="fedramp-moderate-sandbox",e}({})},"./node_modules/@atlassiansox/analytics-web-client/node_modules/js-cookie/src/js.cookie.js":e=>{!function(t){if("function"==typeof define&&define.amd&&(define(t),!0),e.exports=t(),!!0){var r=window.Cookies,n=window.Cookies=t();n.noConflict=function(){return window.Cookies=r,n}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function s(){}function i(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},s.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var o=JSON.stringify(r);/^[\{\[]/.test(o)&&(r=o)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in i)i[c]&&(a+="; "+c,!0!==i[c]&&(a+="="+i[c].split(";")[0]));return document.cookie=t+"="+r+a}}function o(e,r){if("undefined"!=typeof document){for(var s={},i=document.cookie?document.cookie.split("; "):[],o=0;o<i.length;o++){var a=i[o].split("="),c=a.slice(1).join("=");r||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(a[0]);if(c=(n.read||n)(c,l)||t(c),r)try{c=JSON.parse(c)}catch(e){}if(s[l]=c,e===l)break}catch(e){}}return e?s[e]:s}}return s.set=i,s.get=function(e){return o(e,!1)},s.getJSON=function(e){return o(e,!0)},s.remove=function(t,r){i(t,"",e(r,{expires:-1}))},s.defaults={},s.withConverter=r,s}((function(){}))}))},"./node_modules/@atlassiansox/analytics-web-client/node_modules/uuid/lib/bytesToUuid.js":e=>{for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var n=r||0,s=t;return[s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],"-",s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]],s[e[n++]]].join("")}},"./node_modules/@atlassiansox/analytics-web-client/node_modules/uuid/lib/rng-browser.js":e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)3&t||(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},"./node_modules/@atlassiansox/analytics-web-client/node_modules/uuid/v4.js":(e,t,r)=>{var n=r("./node_modules/@atlassiansox/analytics-web-client/node_modules/uuid/lib/rng-browser.js"),s=r("./node_modules/@atlassiansox/analytics-web-client/node_modules/uuid/lib/bytesToUuid.js");e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[i+a]=o[a];return t||s(o)}},"./node_modules/@segment/isodate-traverse/lib/index.js":(e,t,r)=>{"use strict";var n=r("./node_modules/@segment/isodate/lib/index.js");function s(e,t){return void 0===t&&(t=!0),e&&"object"==typeof e?function(e,t){return Object.keys(e).forEach((function(r){e[r]=s(e[r],t)})),e}(e,t):Array.isArray(e)?function(e,t){return e.forEach((function(r,n){e[n]=s(r,t)})),e}(e,t):n.is(e,t)?n.parse(e):e}e.exports=s},"./node_modules/@segment/isodate/lib/index.js":(e,t)=>{"use strict";var r=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;t.parse=function(e){var t=[1,5,6,7,11,12],n=r.exec(e),s=0;if(!n)return new Date(e);for(var i,o=0;i=t[o];o++)n[i]=parseInt(n[i],10)||0;n[2]=parseInt(n[2],10)||1,n[3]=parseInt(n[3],10)||1,n[2]--,n[8]=n[8]?(n[8]+"00").substring(0,3):0," "===n[4]?s=(new Date).getTimezoneOffset():"Z"!==n[9]&&n[10]&&(s=60*n[11]+n[12],"+"===n[10]&&(s=0-s));var a=Date.UTC(n[1],n[2],n[3],n[5],n[6]+s,n[7],n[8]);return new Date(a)},t.is=function(e,t){return"string"==typeof e&&((!t||!1!==/^\d{4}-\d{2}-\d{2}/.test(e))&&r.test(e))}},"./packages/browser/index.ts":(e,t,r)=>{"use strict";r.d(t,{Pw:()=>s,Pi:()=>V,oJ:()=>p,IO:()=>c,eO:()=>u,fm:()=>U,Z0:()=>k,ft:()=>B,m0:()=>C,zC:()=>q,H8:()=>g,xl:()=>S,F3:()=>f,oi:()=>D,Ab:()=>F,Cr:()=>M,gm:()=>m,mc:()=>N,lT:()=>h,mU:()=>I,N1:()=>O,aR:()=>E,j9:()=>w,cX:()=>v,nr:()=>y,CI:()=>A,uF:()=>b,ME:()=>d,E4:()=>R,SQ:()=>L});var n=r("./packages/config/index.ts");let s=function(e){return e.Edge="edg",e.EdgeLegacy="edge",e.Chrome="chrome",e.Explorer="explorer",e.Vivaldi="vivaldi",e.Yandex="yandex",e.Firefox="firefox",e.Safari="safari",e.Opera="opera",e.Samsung="samsung",e.UCBrowser="ucbrowser",e.Unknown="unknown-browser",e}({});var i=function(e){return e.Windows="windows",e.Mac="mac",e.Linux="linux",e.Android="android",e.iPad="ipad",e.iPod="ipod",e.iPhone="iphone",e.Unknown="unknown-os",e}(i||{});const o="unknown-browser-version",a=(e,t)=>{let{userAgent:r}=t;const n=r.indexOf(e);if(-1!==n){const t=r.substring(n+e.length+1);return t.includes(".")?parseFloat(t.split(".").slice(0,2).join(".")):parseInt(t,10)}return o},c=((e,t)=>{let{userAgent:r,vendor:n}=e;const i=!!t.documentMode,o=r.includes("Edg/"),a=r.includes("Edge"),c=r.includes("Opera")||r.includes("OPR"),l=r.includes("Vivaldi"),u=r.includes("Firefox"),d=r.includes("UCBrowser"),p=r.includes("SamsungBrowser"),h=n.includes("Yandex"),m=r.includes("Chrom")&&!o&&!a&&!c&&!h&&!l&&!p&&!d,f=r.includes("CriOS")||n.includes("Apple")&&!m;switch(!0){case m:return s.Chrome;case u:return s.Firefox;case f:return s.Safari;case o:return s.Edge;case a:return s.EdgeLegacy;case i:return s.Explorer;case c:return s.Opera;case h:return s.Yandex;case l:return s.Vivaldi;case d:return s.UCBrowser;case p:return s.Samsung;default:return s.Unknown}})(navigator,document),l=((e,t)=>{switch(e){case s.Chrome:{const e=a("Chrome",t);return e!==o?e:a("CriOS",t)}case s.Firefox:return a("Firefox",t);case s.Safari:return(e=>{if(e.userAgent.includes("CriOS")){const t=e.userAgent.match(/OS ([0-9]+)_[0-9]+(_[0-9]+)? like Mac OS X/);return t?+t[1]:o}return a("Version",e)})(t);case s.Edge:return a("Edg",t);case s.EdgeLegacy:return a("Edge",t);case s.Opera:return a("OPR",t);case s.Explorer:{const e=a("MSIE",t);return e!==o?e:a("rv",t)}case s.Yandex:return a("YaBrowser",t);case s.Vivaldi:return a("Vivaldi",t);case s.Samsung:return a("SamsungBrowser",t);case s.UCBrowser:return a("UCBrowser",t);default:return o}})(c,navigator),u=`${c}-${l}`,d=(e=>{let{userAgent:t,platform:r}=e;const n=r.includes("Win"),s=r.includes("Mac"),o=r.includes("Linux"),a=t.includes("Android"),c=t.includes("iPad"),l=t.includes("iPod"),u=t.includes("iPhone");switch(!0){case n:return i.Windows;case s:return i.Mac;case c:return i.iPad;case l:return i.iPod;case u:return i.iPhone;case a:return i.Android;case o:return i.Linux;default:return i.Unknown}})(navigator),p=`${c} ${u} ${d}`,h=()=>c===s.Explorer,m=()=>c===s.Firefox,f=()=>c===s.EdgeLegacy,g=()=>c===s.Chrome,y=()=>c===s.Safari,b=()=>d===i.Windows,v=()=>d===i.Mac,w=()=>d===i.Linux,C=()=>d===i.Android,_=()=>d===i.iPad,O=()=>d===i.iPod,I=()=>d===i.iPhone,E=()=>_()||I()||O(),A=()=>_()||I()||O()||C(),S=()=>n.R0===n.l0.Desktop,k=()=>navigator.language||navigator.browserLanguage||"unknown";var j=r("./node_modules/memoize-one/dist/memoize-one.esm.js"),T=r("./node_modules/@atlassian/browser-storage-controls/dist/esm/controllers/cookie-controls/get-cookie/index.js");const P=(0,j.A)((e=>"true"===(0,T.R)("force_atlassian_embeddedDocument"))),x=(0,j.A)((e=>"true"===(0,T.R)("force_embeddedDocument")||P(e)));function D(){return x(document.cookie)||window.top!==window.self}const N=()=>window.devicePixelRatio>1,R=()=>g()||m()||c===s.Edge,L=()=>g()||m()||y(),M=()=>{if(!D())return!1;const e=new URLSearchParams(window.location.search);return e.has("iframeSource")&&"msteams"===e.get("iframeSource")},F=()=>{if(P(document.cookie))return!0;if(!D())return!1;const e=new URLSearchParams(window.location.search);return e.has("iframeSource")&&"atlassian-smart-link"===e.get("iframeSource")},U=()=>S()||M()||F();function B(){return"ResizeObserver"in window}const $={[s.Chrome]:109,[s.Firefox]:115,[s.Edge]:120,[s.Safari]:15.5,[s.Opera]:106,[s.Vivaldi]:3};function q(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;return t!==o&&(!!function(e){return Object.prototype.hasOwnProperty.call($,e)}(e)&&t>=$[e])}class V{disconnect(){}observe(){}unobserve(){}}},"./packages/config/index.ts":(e,t,r)=>{"use strict";r.d(t,{l0:()=>n,$8:()=>B,qV:()=>R,ad:()=>L,fg:()=>N,R0:()=>i,Nc:()=>M,xb:()=>$,Xj:()=>O,R4:()=>I,Pf:()=>ae,rT:()=>_,PI:()=>C,ac:()=>P,Sn:()=>ne,Ov:()=>se,JR:()=>g,$B:()=>a,CT:()=>o,cZ:()=>T,vT:()=>Q,cA:()=>F,lk:()=>y,A5:()=>z,kO:()=>G,Gw:()=>S,_Y:()=>k,dq:()=>j,oO:()=>D,tp:()=>d,l$:()=>p,Jt:()=>U,jg:()=>m,So:()=>te,Mf:()=>q,qT:()=>v,Hg:()=>ie,Qq:()=>E,Eu:()=>w,qX:()=>H,U$:()=>K,Zz:()=>A,K3:()=>Z,x1:()=>ee,II:()=>Y,Q7:()=>b,tx:()=>W,Yq:()=>J,mx:()=>oe,rX:()=>h,xZ:()=>x,mW:()=>f,w0:()=>X,LQ:()=>V});let n=function(e){return e.Desktop="desktop",e}({});const s=window.init_config||{},i=s.appId||null,o=s.dontDismissNotifications||null,a=(s.limitMemoryUsage,s.desktopVersion||"0");function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l,u;const d="chlg06CfblVj204fihGEqA",p="env-8",h="https://trello-slack.services.atlassian.com",m=!1,f="https://p.trellocdn.com",g="56d5e249a98895a9797bebb9",y="5a999cd36066c584c097f193",b="5f4ff6881ce8e97c81d2f605",v="5c2462c384ab8949b1724a20",w="5ad892c30b141641d32919bf",C="588a331cc86ffbe08f5d2c67",_="https://admin.atlassian.com/billing",O="https://trello-attachments.s3.amazonaws.com",I="https://trello-backgrounds.s3.amazonaws.com",E="https://trello-logos.s3.amazonaws.com",A="f7936f71-2186-4c33-8553-134e287aefdf",S="330642982326-o2b8p0glj3m1o0sgllrpas2m8j9hjn7i.apps.googleusercontent.com",k="AIzaSyAvSBSs9sIV0S5wf4ivvDrwYp6Q20e7jGE",j="122616814543-k4q6th338f4j05dkv1qgvcbutlpa0voe.apps.googleusercontent.com",T="36ipz29apw2svq8",P="zclwcvudmddhz0cscz3w6awtcfs8bne3",x="pk_live_51IaUVrBgOoA7vC4WlHhHNjTeOOqbF7d56Ge0Vvju0qbrBJGLdBmpeGQntGWaCgVKPk3c2itZOuTuFjcxmMyC6g4m00DL5aSU1K",D="AIzaSyBGuM0ku7LVKH0l45qQsvvUnG2H2jUX0GU",N="PROD",R="trello.com/gateway/api/gasv3/api/v1",L="https",M="1f24403e-f053-43de-b063-e20b357a8f63",F="prod",U="https://id.atlassian.com",B="https://admin.atlassian.com",$="wss://trello.com/gateway/api/graphql/subscriptions",q="https://janus.prod.atl-paas.net",V="https://www.atlassian.com",W="https://1609e814bfa14a3db09f984e6426cfd3@o55978.ingest.sentry.io/5988847",H="6052d130068a8c0de7b022b4",K="https://appsource.microsoft.com/en-us/product/office/WA200002592?tab=Overview",z="6052d16c340ed23e9da083ed",G="https://workspace.google.com/marketplace/app/trello_for_gmail/710372432947",Q="6052d0bb1b3c162630f54230",J=!0,X="https://trello-server.us-east-1.prod.atl-paas.net",Y="https://atl-onetrust-wrapper.atlassian.com/assets/atl-onetrust-wrapper.min.js",Z="dcb287ca-43c0-462c-a090-46b2debf69e2",ee=!1,te=!1,re=null!==(l=null===(u=window)||void 0===u?void 0:u.trelloVersion)&&void 0!==l?l:"dev-0",ne=new class{constructor(e){c(this,"head",void 0),c(this,"patch",0),c(this,"version",void 0);const t=e.split("-");this.head=t.slice(0,-1).join("-"),this.version=parseFloat(t.slice(-1)[0])}toString(){return`${this.head}-${this.fullVersion()}`}toJSON(){return this.toString()}fullVersion(){return[this.version,this.patch].filter((e=>e)).join(".")||0}}(re),se=ne.toString(),ie=window.locale||"en",oe=location.origin||/^[^/]+?[/]{2}[^/]+/.exec(location.href)[0],ae=window.__bifrost_track__},"./packages/feature-flag-client/src/getRecordedFeatureFlag.ts":(e,t,r)=>{"use strict";r.d(t,{r:()=>s});var n=r("./packages/storage/index.ts");function s(e,t){var r;const s=n._q.get("featureFlagSnapshot"),{remote:i={},overrides:o={}}=null!=s?s:{},a=o[e],c=i[e];return null!==(r=null!=a?a:c)&&void 0!==r?r:t}},"./packages/id-cache/index.ts":(e,t,r)=>{"use strict";r.d(t,{ij:()=>o,qv:()=>h,g$:()=>p,x2:()=>a});const n=new RegExp("ari:cloud:trello::[^/]+/(.+/)?[a-z0-9]{24}$");function s(e){return n.test(e)}const i=new RegExp("^[a-f0-9]*$");function o(e){return"ObjectID"===(null!=e?e.constructor.name:void 0)||24===(null!=e?e.length:void 0)&&i.test(e)}function a(e){return"string"==typeof e&&/^[a-zA-Z0-9]{8}$/.test(e)}function c(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=new WeakSet;function d(e){return Object.keys(e).reduce(((t,r)=>(t[e[r]]=r,t)),{})}function p(e){return/^[0-9]{1,8}$/.test(e.toString())}const h=new class{constructor(){c(this,u),l(this,"idMap",void 0),l(this,"ariMap",void 0),this.idMap={Card:{},Board:{},Workspace:{}},this.ariMap={Card:{},Board:{},Workspace:{}}}getId(e,t){return o(t)?t:this.idMap[e][t]}setId(e,t,r){if(!o(r))throw new Error(`Not an id: ${r}`);if("Workspace"!==e&&!a(t))throw new Error(`Not a shortLink: ${t}`);return this.idMap[e][t]=r}deleteId(e,t){this.getId(e,t)&&delete this.idMap[e][t]}getAri(e,t){return s(t)?t:this.ariMap[e][t]}setAri(e,t,r){if(!s(r))throw new Error(`Not an ARI: ${r}`);if("Workspace"!==e&&!a(t))throw new Error(`Not a shortLink: ${t}`);return this.ariMap[e][t]=r}setCardId(e,t){return this.setId("Card",e,t)}setBoardId(e,t){return this.setId("Board",e,t)}setWorkspaceId(e,t){return this.setId("Workspace",e,t)}getCardId(e){return this.getId("Card",e)}getBoardId(e){return this.getId("Board",e)}getWorkspaceId(e){return this.getId("Workspace",e)}setCardAri(e,t){return this.setAri("Card",e,t)}setBoardAri(e,t){return this.setAri("Board",e,t)}setWorkspaceAri(e,t){return this.setAri("Workspace",e,t)}getCardAri(e){return this.getAri("Card",e)}getBoardAri(e){return this.getAri("Board",e)}getWorkspaceAri(e){return this.getAri("Workspace",e)}__getBoardShortLinkById__DO_NOT_USE(e){if(!o(e))return;const t=function(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}(u,this,d).call(this,this.idMap.Board);return t[e]}}},"./packages/invitation-tokens/src/getInvitationTokens.ts":(e,t,r)=>{"use strict";r.d(t,{Q:()=>n});const n=()=>{let e;const t=[],r=/invite-token-[-a-f0-9]*=([^;]+)/g;for(;e=null===(n=r.exec(document.cookie))||void 0===n?void 0:n[1];){var n;t.push(unescape(e))}if(t.length>0)return t.join(",")}},"./packages/quickload/src/cleanPreload.ts":(e,t,r)=>{"use strict";r.d(t,{l:()=>n});const n=e=>({isLoading:e.isLoading,start:e.start,used:e.used,url:e.url})},"./packages/quickload/src/formatUrl.ts":(e,t,r)=>{"use strict";r.d(t,{J:()=>s});var n=r("./packages/invitation-tokens/src/getInvitationTokens.ts");const s=(e,t)=>{var r,s;let{rootId:i,idModel:o}=t,a=e.replace(i,o);const c=null===(r=window)||void 0===r||null===(s=r.document)||void 0===s?void 0:s.cookie;if(new RegExp("^/1/search").test(e)){var l;const e=null===(l=/dsc=([^;]+)/.exec(c))||void 0===l?void 0:l[1];a+=`&dsc=${null!=e?e:"undefined"}`}const u=(0,n.Q)();return a+=u?`&invitationTokens=${u}`:"",a}},"./packages/quickload/src/getPreloadsFromPath.ts":(e,t,r)=>{"use strict";r.d(t,{m:()=>d});var n=r("./packages/feature-flag-client/src/getRecordedFeatureFlag.ts"),s=r("./packages/id-cache/index.ts"),i=r("./packages/quickload/src/formatUrl.ts");const o={header:{taskName:null,requests:[{url:"/1/member/:idMember?fields=id%2CaaBlockSyncUntil%2CaaEmail%2CaaId%2CactivityBlocked%2CavatarHash%2CavatarUrl%2Cbio%2CbioData%2Cconfirmed%2CcredentialsRemovedCount%2CdomainClaimed%2Cemail%2CfullName%2CidBoards%2CidEnterprise%2CidEnterprisesAdmin%2CidEnterprisesDeactivated%2CidEnterprisesImplicitAdmin%2CidMemberReferrer%2CidOrganizations%2CidPremOrgsAdmin%2Cinitials%2CisAaMastered%2CixUpdate%2Climits%2CloginTypes%2CmarketingOptIn%2CmemberType%2CmessagesDismissed%2CnonPublic%2CnonPublicAvailable%2ConeTimeMessagesDismissed%2Cprefs%2CpremiumFeatures%2Cproducts%2CrequiresAaOnboarding%2CsessionType%2Cstatus%2Ctrophies%2Curl%2Cusername&campaigns=true&channels=true&enterpriseLicenses=true&enterprises=true&enterprise_filter=saml%2Cmember%2Cmember-unconfirmed%2Cowned&enterprise_fields=id%2CdisplayName%2CidAdmins%2ClogoUrl%2Cname%2Coffering%2CorganizationPrefs%2Cprefs%2Csandbox%2CsandboxExpiry&enterpriseWithRequiredConversion=true&logins=true&organizations=all&organization_fields=id%2CdisplayName%2CenterpriseJoinRequest%2CidEnterprise%2CjwmLink%2ClogoHash%2Cname%2Coffering%2CpremiumFeatures%2Cproducts&organization_enterprise=true&organization_paidAccount=true&organization_paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CdatePendingDisabled%2CexpirationDates%2CinvoiceDetails%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&paidAccount=true&paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CdatePendingDisabled%2CexpirationDates%2CinvoiceDetails%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&pluginData=true&savedSearches=true&teamify=true",rootId:":idMember",operationName:"quickload:MemberHeader",modelName:"Member"},{url:"/1/member/:idMember?fields=id&boards=open%2Cstarred&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2CnodeId%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Csubscribed%2Curl&board_memberships=me&board_organization=true&board_organization_fields=id%2Ccredits%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts&boardStars=true&credits=invitation%2CpromoCode&organizations=all&organization_fields=id%2Ccredits%2Climits%2Cmemberships%2Cprefs%2CpremiumFeatures",rootId:":idMember",operationName:"quickload:MemberBoards",modelName:"Member"}]},"^/b/([^/]+)":{taskName:"view-board",requests:[{url:"/1/board/:idBoard?fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2Cdesc%2CdescData%2CenterpriseOwned%2CidEnterprise%2CidMemberCreator%2CidOrganization%2CidTags%2ClabelNames%2Climits%2Cmemberships%2Cname%2CnodeId%2CpowerUps%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Csubscribed%2CtemplateGallery%2Curl&organization_disable_mock=true&boardPlugins=true&customFields=true&enterprise=true&enterprise_fields=id%2CaiPrefs%2CdisplayName&labels=all&label_fields=id%2Ccolor%2CidBoard%2Cname&labels_limit=1000&members=all&member_fields=id%2CactivityBlocked%2CavatarUrl%2Cbio%2CbioData%2Cconfirmed%2CfullName%2CidEnterprise%2CidMemberReferrer%2CidPremOrgsAdmin%2Cinitials%2CmemberType%2CnonPublic%2Curl%2Cusername&memberships_orgMemberType=true&myPrefs=true&organization=true&organization_fields=id%2Cdesc%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Curl%2Cwebsite&organization_enterprise=true&organization_memberships=all&organization_pluginData=true&organization_tags=true&pluginData=true",rootId:":idBoard",operationName:"quickload:CurrentBoardInfo",modelName:"Board"},{url:"/1/board/:idBoard?fields=id&cards=visible&card_fields=id%2Caddress%2Cbadges%2CcardRole%2Cclosed%2Ccoordinates%2Ccover%2CcreationMethodError%2CdateLastActivity%2Cdesc%2CdescData%2Cdue%2CdueComplete%2CdueReminder%2CidAttachmentCover%2CidBoard%2CidLabels%2CidList%2CidMembers%2CidShort%2CisTemplate%2Clabels%2Climits%2ClocationName%2Cname%2Cpinned%2Cpos%2CshortLink%2CshortUrl%2Cstart%2Csubscribed%2Curl&card_attachments=true&card_attachment_fields=id%2Cbytes%2Cdate%2CedgeColor%2CfileName%2CidMember%2CisUpload%2CmimeType%2Cname%2Cpos%2Curl&card_checklists=all&card_checklist_fields=id%2CidBoard%2CidCard%2Cname%2Cpos&card_checklist_checkItems=none&card_customFieldItems=true&card_pluginData=true&card_stickers=true&lists=open&list_fields=id%2Cclosed%2Ccolor%2CcreationMethod%2CidBoard%2Climits%2Cname%2Cpos%2CsoftLimit%2Csubscribed",rootId:":idBoard",operationName:"quickload:CurrentBoardListsCards",modelName:"Board"},{url:"/gateway/api/graphql",rootId:":idBoard",operationName:"quickload:TrelloCurrentBoardInfo",modelName:"TrelloBoard",featureFlag:{key:"fep.native-current-board-full",value:"true",defaultValue:"false"},graphQLPayload:{query:'query TrelloCurrentBoardInfo($id:TrelloShortLink!){trello{boardByShortLink(shortLink:$id)@optIn(to:"TrelloBoard"){id __typename closed creationMethod creator{id __typename objectId}customFields{__typename nodes{__typename display{__typename cardFront}name objectId options{__typename color objectId position value{__typename text}}position type}}description{__typename customData{emojis(first:-1){nodes{name url}}}text}enterprise{id __typename displayName objectId}enterpriseOwned galleryInfo{id __typename avatarShape avatarUrl blurb byline category{__typename key}language{__typename description enabled language locale localizedDescription}stats{__typename copyCount viewCount}}labels(first:-1){__typename nodes{__typename color name objectId}}lastActivityAt limits{__typename attachments{__typename perBoard{__typename disableAt status warnAt}perCard{__typename disableAt status warnAt}}boards{__typename totalMembersPerBoard{__typename disableAt status warnAt}}cards{__typename openPerBoard{__typename disableAt status warnAt}openPerList{__typename disableAt status warnAt}totalPerBoard{__typename disableAt status warnAt}totalPerList{__typename disableAt status warnAt}}checkItems{__typename perChecklist{__typename disableAt status warnAt}}checklists{__typename perBoard{__typename disableAt status warnAt}perCard{__typename disableAt status warnAt}}customFieldOptions{__typename perField{__typename disableAt status warnAt}}customFields{__typename perBoard{__typename disableAt status warnAt}}labels{__typename perBoard{__typename disableAt status warnAt}}lists{__typename openPerBoard{__typename disableAt status warnAt}totalPerBoard{__typename disableAt status warnAt}}reactions{__typename perAction{__typename disableAt status warnAt}}stickers{__typename perCard{__typename disableAt status warnAt}}}name objectId popularLabelNamesByColor{__typename color labelName}powerUpData(first:-1){__typename nodes{__typename access objectId powerUp{objectId}scope value}}powerUps(filter:{access:"enabled"},first:-1){edges{__typename node{__typename objectId}objectId}}prefs{__typename background{__typename bottomColor brightness color image imageScaled{height url width}tile topColor}calendarFeedEnabled canInvite cardAging cardCovers comments hiddenPowerUpBoardButtons{__typename objectId}hideVotes invitations isTemplate permissionLevel selfJoin switcherViews{__typename enabled viewType}voting}premiumFeatures shortLink shortUrl tags(first:-1){__typename nodes{__typename objectId}}url viewer{__typename calendarKey email{__typename key list{id __typename objectId}position}lastSeenAt sidebar{__typename show}subscribed}workspace{id __typename description displayName enterprise{id __typename displayName objectId}logoHash name objectId prefs{__typename associatedDomain}tags(first:-1){__typename nodes{__typename name objectId}}url website}}}}',variables:{id:":idBoard"},operationName:"TrelloCurrentBoardInfo"}}]},"^//([^/]*([^/]+))$":{taskName:null,requests:[{url:"/1/member/:idMember?fields=id&boards=open%2Cstarred&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boardStars=true",rootId:":idMember",operationName:"quickload:MemberQuickBoards",modelName:"Member"},{url:"/1/search?query=:searchTerm&partial=true&modelTypes=boards&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl",rootId:":searchTerm",operationName:"quickload:QuickBoardsSearch",modelName:"Search"}]},"^/search":{taskName:null,requests:[{url:"/1/member/:idMember?fields=id&boards=open%2Cstarred&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boardStars=true",rootId:":idMember",operationName:"quickload:MemberQuickBoards",modelName:"Member"}]},"^//$":{taskName:null,requests:[{url:"/1/member/:idMember?fields=id&boards=open%2Cstarred&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boardStars=true",rootId:":idMember",operationName:"quickload:MemberQuickBoards",modelName:"Member"}]},"^/c/([^/]+)":{taskName:"view-board",requests:[{url:"/1/card/:idCard?fields=id%2Cbadges%2CcardRole%2Cclosed%2Ccover%2CcreationMethodError%2CdateLastActivity%2Cdesc%2CdescData%2Cdue%2CdueComplete%2CdueReminder%2Cemail%2CidAttachmentCover%2CidBoard%2CidChecklists%2CidLabels%2CidList%2CidMembers%2CidMembersVoted%2CidShort%2CisTemplate%2Clabels%2Climits%2CmanualCoverAttachment%2Cname%2Cpinned%2Cpos%2CshortLink%2CshortUrl%2Cstart%2Csubscribed%2Curl&attachments=true&attachment_fields=id%2Cbytes%2Cdate%2CedgeColor%2CfileName%2CidMember%2CisUpload%2CmimeType%2Cname%2Cpos%2Cpreviews%2Curl&customFieldItems=true&pluginData=true&stickers=true&sticker_fields=id%2Cimage%2CimageScaled%2CimageUrl%2Cleft%2Crotate%2Ctop%2CzIndex",rootId:":idCard",operationName:"quickload:PreloadCard",modelName:"Card"}],deferredPreloads:["CurrentBoardInfo","CurrentBoardListsCards"]},"^/w/([^/]+)/billing$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2Ccredits%2CdisplayName%2CidEnterprise%2Cmemberships%2Cname%2Coffering%2Cprefs%2Cproducts&enterprise=true&memberships=active",rootId:":idOrganization",operationName:"quickload:OrganizationBillingPage",modelName:"Organization"}]},"^/([^/]+)/billing$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2Ccredits%2CdisplayName%2CidEnterprise%2Cmemberships%2Cname%2Coffering%2Cprefs%2Cproducts&enterprise=true&memberships=active",rootId:":idOrganization",operationName:"quickload:OrganizationBillingPage",modelName:"Organization"}]},"^/w/(?!search)(?!create-first-team)(?!blank)(?!shortcuts)(?!templates)(?!redeem)([^/]+)$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2CbillableCollaboratorCount%2Ccredits%2Cdesc%2CdescData%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Cwebsite&boards=open&boards_count=29&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2CidTags%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boards_sortBy=dateLastActivity&boards_sortOrder=desc&enterprise=true&memberships=active&paidAccount=true&paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CexpirationDates%2CinvoiceDetails%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&tags=true",rootId:":idOrganization",operationName:"quickload:WorkspaceBoardsPageMinimal",modelName:"Organization"}]},"^/(?!search)(?!create-first-team)(?!blank)(?!shortcuts)(?!templates)(?!redeem)([^/]+)$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2CbillableCollaboratorCount%2Ccredits%2Cdesc%2CdescData%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Cwebsite&boards=open&boards_count=29&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2CidTags%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boards_sortBy=dateLastActivity&boards_sortOrder=desc&enterprise=true&memberships=active&paidAccount=true&paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CexpirationDates%2CinvoiceDetails%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&tags=true",rootId:":idOrganization",operationName:"quickload:WorkspaceBoardsPageMinimal",modelName:"Organization"}]},"^/w/([^/]+)/home$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2CbillableCollaboratorCount%2Ccredits%2Cdesc%2CdescData%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Cwebsite&boards=open&boards_count=100&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2CidTags%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boards_sortBy=dateLastActivity&boards_sortOrder=desc&board_membershipCounts=active&board_starCounts=organization&enterprise=true&members=all&member_fields=id&memberships=active&paidAccount=true&paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CexpirationDates%2CinvoiceDetails%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&tags=true",rootId:":idOrganization",operationName:"quickload:WorkspaceHomePageMinimal",modelName:"Organization"}]},"^/([^/]+)/home$":{taskName:null,requests:[{url:"/1/organization/:idOrganization?fields=id%2CbillableCollaboratorCount%2Ccredits%2Cdesc%2CdescData%2CdisplayName%2CidEnterprise%2Climits%2ClogoHash%2Cmemberships%2Cname%2Coffering%2Cprefs%2CpremiumFeatures%2Cproducts%2Cwebsite&boards=open&boards_count=100&board_fields=id%2Cclosed%2CcreationMethod%2CdateLastActivity%2CdateLastView%2CdatePluginDisable%2CenterpriseOwned%2CidEnterprise%2CidOrganization%2CidTags%2Cname%2Cprefs%2CpremiumFeatures%2CshortLink%2CshortUrl%2Curl&boards_sortBy=dateLastActivity&boards_sortOrder=desc&board_membershipCounts=active&board_starCounts=organization&enterprise=true&members=all&member_fields=id&memberships=active&paidAccount=true&paidAccount_fields=billingDates%2CcanRenew%2CcardLast4%2CcardType%2CcontactEmail%2CcontactFullName%2CcontactLocale%2Ccountry%2CdateFirstSubscription%2CexpirationDates%2CinvoiceDetails%2CixSubscriber%2CneedsCreditCardUpdate%2CpaidProduct%2CpreviousSubscription%2CproductOverride%2Cproducts%2CscheduledChange%2Cstanding%2CstateTaxId%2CtaxId%2CtrialExpiration%2CtrialType%2Czip&tags=true",rootId:":idOrganization",operationName:"quickload:WorkspaceHomePageMinimal",modelName:"Organization"}]}};function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u=e=>!e.featureFlag||(0,n.r)(e.featureFlag.key,e.featureFlag.defaultValue)===e.featureFlag.value,d=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.pathname,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.search;arguments.length>2&&void 0!==arguments[2]||window.document.cookie;const n=t.replace(/\?(.*)$/,""),a=Object.keys(o).find((e=>{if("header"===e)return!1;const t=o[e].requests,r=new RegExp(e);return!!t.find(u)&&r.test(n)})),l=a&&o[a].requests.filter(u),d=a&&o[a].deferredPreloads?o[a].deferredPreloads:[],p=a&&o[a].taskName||null;let h=(null===(e=new RegExp(a||"").exec(n))||void 0===e?void 0:e[1])||"";new RegExp("^/search$").test(t)&&(h=new URLSearchParams(r).get("q")||"");const m=(0,s.x2)(h),f=o.header.requests.filter(u).concat(l||[]).filter((e=>{let{graphQLPayload:t}=e;return!t||m})).map((e=>{let{url:t,rootId:r,operationName:n,modelName:s,graphQLPayload:o}=e;const a={url:(0,i.J)(t,{rootId:r,idModel:":idMember"===r?"me":h}),operationName:n,modelName:s,queryName:n.replace("quickload:",""),taskName:p};return o&&(a.graphQLPayload=c(c({},o),{},{variables:{id:":idMember"===r?"me":h}})),a}));return{path:n,preloads:f,deferredPreloads:d,param:h}}},"./packages/quickload/src/preloadsHash.ts":(e,t,r)=>{"use strict";r.d(t,{P:()=>s,x:()=>n});const n=e=>{let{url:t,graphQLPayload:r}=e;if(r){const{operationName:e,variables:t}=r;return`${e}:${JSON.stringify(t)}`}return t},s={}},"./packages/quickload/src/quickload.ts":(e,t,r)=>{"use strict";r.d(t,{I:()=>f});var n=r("./packages/feature-flag-client/src/getRecordedFeatureFlag.ts"),s=r("./packages/quickload/src/cleanPreload.ts"),i=r("./packages/quickload/src/getPreloadsFromPath.ts");const o=()=>{let e="";for(let t=0;t<16;t+=1){e+="0123456789abcdef"[Math.floor(16*Math.random())]}return e};function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r("./packages/quickload/src/preloadsHash.ts");const u=function(e){try{return JSON.parse(e)}catch(e){return null}},d=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"model-loader",i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;const c=new XMLHttpRequest,l=!0===(0,n.r)("fep.operation-name-in-url",!1);c.open("GET",l&&r?`${e}&operationName=${r}`:e,!0),c.setRequestHeader("Accept","application/json,text/plain"),c.setRequestHeader("X-Trello-Client-Version",window.trelloVersion||"dev-0"),c.setRequestHeader("X-Trello-Operation-Source",s),c.setRequestHeader("X-Trello-Operation-Name",r),i&&(c.setRequestHeader("X-Trello-TraceId",i),c.setRequestHeader("X-B3-TraceId",i),c.setRequestHeader("X-B3-SpanId",o()),c.setRequestHeader("X-Trello-Task",a||"not-implemented")),c.onreadystatechange=function(){4===c.readyState&&(200!==c.status?t([c.status,c.responseText]):t(null,[u(c.responseText),c]))},c.send(null)},p=function(e){e in l.P&&delete l.P[e]},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"preload",r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!e)return;const a={isLoading:!0,callbacks:[],start:Date.now(),used:!1,url:e,traceId:s},c=(0,l.x)({url:e,graphQLPayload:r});l.P[c]=a,r?function(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unknown",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"quickload",a=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0;const l=new Headers;l.append("Content-Type","application/json; charset=utf-8"),l.append("Accept","application/json"),l.append("X-Trello-Client-Version",window.trelloVersion||"dev-0"),l.append("X-Trello-Operation-Source",i),l.append("X-Trello-Operation-Name",s),a&&(l.append("X-Trello-TraceId",a),l.append("X-B3-TraceId",a),l.append("X-B3-SpanId",o()),l.append("X-Trello-Task",c||"not-implemented")),(async()=>{try{const i=!0===(0,n.r)("fep.operation-name-in-url",!1),o=await fetch(i&&s?`${e}?operationName=${s}`:e,{method:"POST",headers:l,body:JSON.stringify(t)});if(o.ok){const e=await o.json();r(null,[e,null])}else r([o.status,await o.text()])}catch(e){r([0,"failed to fetch"])}})()}(e,r,(function(e,t){if(a.isLoading=!1,e){a.error=e;for(const t of Array.from(a.callbacks))t(e)}else{a.data=t;for(const e of Array.from(a.callbacks))e(null,t)}}),t,"quickload",s,i):d(e,(function(e,t){let r;if(a.isLoading=!1,e)for(r of(a.error=e,Array.from(a.callbacks)))r(e);else for(r of(a.data=t,Array.from(a.callbacks)))r(null,t)}),t,"quickload",s,i)},m={init(){const e=Math.floor(Date.now()/1e3).toString(16)+(o().slice(8)+o()),{preloads:t}=(0,i.m)();for(const{url:r,operationName:n,graphQLPayload:s,taskName:i}of t)h(r,n,s,e,i)},getPreloadsFromPath:i.m,makeUrl:function(e,t){let r,n;n=void 0===t?{}:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t);const s=[],i=/invite-token-[-a-f0-9]*=([^;]+)/g;for(;void 0!==(r=null===(o=i.exec(document.cookie))||void 0===o?void 0:o[1]);){var o;s.push(unescape(r))}if(s.length>0&&(n.invitationTokens=s.join(",")),new RegExp("^/1/search(/|$)").test(e)){var l;const e=null===(l=/dsc=([^;]+)/.exec(document.cookie))||void 0===l?void 0:l[1];e&&(n.dsc=e)}const u=[];for(const e in n){const t=n[e];u.push([e,encodeURIComponent(t)].join("="))}return[e,u.join("&")].join("?")},load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;const a=(0,l.x)({url:e}),c=l.P[a];if(void 0!==c)return c.used=!0,c.isLoading?c.callbacks.push(t):t(c.error,c.data),(0,s.l)(c);d(e,t,r,n,i,o)},getPreloadTraceId(){const{preloads:e}=(0,i.m)();for(const{url:t,graphQLPayload:r}of e){const e=(0,l.x)({url:t,graphQLPayload:r});if(e in l.P)return l.P[e].traceId}},clear(){for(const e in l.P)p(e)},markComplete(){this.status="complete"},status:"pending"};m.init();const f=window.QuickLoad=m},"./packages/storage/index.ts":(e,t,r)=>{"use strict";r.d(t,{Y6:()=>d,_q:()=>u,yR:()=>h});var n=r("./packages/browser/index.ts");function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class i{constructor(){s(this,"storage",void 0),this.storage={}}get length(){return Object.keys(this.storage).length}clear(){this.storage={}}getItem(e){return this.storage[e]||null}key(e){return Object.keys(this.storage)[e]||null}removeItem(e){delete this.storage[e]}setItem(e,t){this.storage[e]=t||""}}function o(e){let t;try{t=window[e];const r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(e){return!(!function(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)}(e)||!t||0===t.length)}}let a=function(e){return e.LOCAL_STORAGE_KEY="localStorage",e.SESSION_STORAGE_KEY="sessionStorage",e}({});function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class l{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.LOCAL_STORAGE_KEY;c(this,"storage",void 0),c(this,"listeners",void 0),c(this,"errorListeners",void 0),c(this,"listenersSyncedAcrossBrowser",void 0),c(this,"LISTENER_IGNORABLE_KEY_PREFIXES",/^(awc\.)/),c(this,"onStorage",(e=>{const{key:t,oldValue:r,newValue:n}=e;t&&!t.match(this.LISTENER_IGNORABLE_KEY_PREFIXES)&&this.broadcastChangeFromOtherInstance({key:t,oldValue:r,newValue:n})})),c(this,"getAllKeys",(()=>this.storage?Object.keys(this.storage):[])),this.listeners=new Set,this.errorListeners=new Set,this.listenersSyncedAcrossBrowser=new Set,(0,n.oi)()&&!o(e)?this.storage=new i:this.storage=window[e],window.addEventListener("storage",this.onStorage)}listen(e){this.listeners.add(e)}addErrorListener(e){this.errorListeners.add(e)}removeErrorListener(e){this.errorListeners.delete(e)}listenSyncedAcrossBrowser(e){this.listenersSyncedAcrossBrowser.add(e),this.listen(e)}unlisten(e){this.listeners.delete(e),this.listenersSyncedAcrossBrowser.delete(e)}broadcastLocalChange(e){this.listeners.forEach((t=>{t(e)}))}broadcastError(e){this.errorListeners.forEach((t=>{t(e)}))}broadcastChangeFromOtherInstance(e){this.listenersSyncedAcrossBrowser.forEach((t=>{t(e)}))}isEnabled(){return!!this.storage}set(e,t){try{if(this.storage){const r=this.getRaw(e),n=JSON.stringify(t);this.storage.setItem(e,n),this.broadcastLocalChange({key:e,oldValue:r,newValue:n})}}catch(t){console.warn(t),this.broadcastError({key:e,error:t})}}get(e){let t=null;const r=this.getRaw(e);if(r)try{t=JSON.parse(r)}catch(e){console.warn(e)}return t}getRaw(e){return this.storage?this.storage.getItem(e):null}unset(e){this.storage&&null!==this.getRaw(e)&&this.storage.removeItem(e)}}const u=new l(a.LOCAL_STORAGE_KEY),d=new l(a.SESSION_STORAGE_KEY);var p=r("./node_modules/react/index.js");const h=(e,t)=>{const[r,n]=(0,p.useState)(t),s=(0,p.useCallback)((t=>{n(t),null===t?u.unset(e):u.set(e,t)}),[e]);return(0,p.useEffect)((()=>{const t=u.get(e);n(null!=t?t:r)}),[]),[r,s]}},"./node_modules/decode-uri-component/index.js":e=>{"use strict";var t="%[a-f0-9]{2}",r=new RegExp("("+t+")|([^%]+?)","gi"),n=new RegExp("("+t+")+","gi");function s(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],s(r),s(n))}function i(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(r)||[],n=1;n<t.length;n++)t=(e=s(t,n).join("")).match(r)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},r=n.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var s=i(r[0]);s!==r[0]&&(t[r[0]]=s)}r=n.exec(e)}t["%C2"]="";for(var o=Object.keys(t),a=0;a<o.length;a++){var c=o[a];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},"./node_modules/filter-obj/index.js":e=>{"use strict";e.exports=function(e,t){for(var r={},n=Object.keys(e),s=Array.isArray(t),i=0;i<n.length;i++){var o=n[i],a=e[o];(s?-1!==t.indexOf(o):t(o,a,e))&&(r[o]=a)}return r}},"./node_modules/memoize-one/dist/memoize-one.esm.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function s(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(s=e[r],i=t[r],!(s===i||n(s)&&n(i)))return!1;var s,i;return!0}function i(e,t){void 0===t&&(t=s);var r=null;function n(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if(r&&r.lastThis===this&&t(n,r.lastArgs))return r.lastResult;var i=e.apply(this,n);return r={lastResult:i,lastArgs:n,lastThis:this},i}return n.clear=function(){r=null},n}},"./node_modules/process/browser.js":e=>{var t,r,n=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var a,c=[],l=!1,u=-1;function d(){l&&a&&(l=!1,a.length?c=a.concat(c):u=-1,c.length&&p())}function p(){if(!l){var e=o(d);l=!0;for(var t=c.length;t;){for(a=c,c=[];++u<t;)a&&a[u].run();u=-1,t=c.length}a=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new h(e,t)),1!==c.length||l||o(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},"./node_modules/query-string/index.js":(e,t,r)=>{"use strict";const n=r("./node_modules/strict-uri-encode/index.js"),s=r("./node_modules/decode-uri-component/index.js"),i=r("./node_modules/split-on-first/index.js"),o=r("./node_modules/filter-obj/index.js"),a=Symbol("encodeFragmentIdentifier");function c(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function l(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function u(e,t){return t.decode?s(e):e}function d(e){return Array.isArray(e)?e.sort():"object"==typeof e?d(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function p(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function h(e){const t=(e=p(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function m(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function f(e,t){c((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return(e,r,n)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};case"colon-list-separator":return(e,r,n)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};case"comma":case"separator":return(t,r,n)=>{const s="string"==typeof r&&r.includes(e.arrayFormatSeparator),i="string"==typeof r&&!s&&u(r,e).includes(e.arrayFormatSeparator);r=i?u(r,e):r;const o=s||i?r.split(e.arrayFormatSeparator).map((t=>u(t,e))):null===r?r:u(r,e);n[t]=o};case"bracket-separator":return(t,r,n)=>{const s=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!s)return void(n[t]=r?u(r,e):r);const i=null===r?[]:r.split(e.arrayFormatSeparator).map((t=>u(t,e)));void 0!==n[t]?n[t]=[].concat(n[t],i):n[t]=i};default:return(e,t,r)=>{void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const s of e.split("&")){if(""===s)continue;let[e,o]=i(t.decode?s.replace(/\+/g," "):s,"=");o=void 0===o?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?o:u(o,t),r(u(e,t),o,n)}for(const e of Object.keys(n)){const r=n[e];if("object"==typeof r&&null!==r)for(const e of Object.keys(r))r[e]=m(r[e],t);else n[e]=m(r,t)}return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce(((e,t)=>{const r=n[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=d(r):e[t]=r,e}),Object.create(null))}t.extract=h,t.parse=f,t.stringify=(e,t)=>{if(!e)return"";c((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const r=r=>t.skipNull&&null==e[r]||t.skipEmptyString&&""===e[r],n=function(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{const s=r.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[l(t,e),"[",s,"]"].join("")]:[...r,[l(t,e),"[",l(s,e),"]=",l(n,e)].join("")]};case"bracket":return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[l(t,e),"[]"].join("")]:[...r,[l(t,e),"[]=",l(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[l(t,e),":list="].join("")]:[...r,[l(t,e),":list=",l(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return r=>(n,s)=>void 0===s||e.skipNull&&null===s||e.skipEmptyString&&""===s?n:(s=null===s?"":s,0===n.length?[[l(r,e),t,l(s,e)].join("")]:[[n,l(s,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,l(t,e)]:[...r,[l(t,e),"=",l(n,e)].join("")]}}(t),s={};for(const t of Object.keys(e))r(t)||(s[t]=e[t]);const i=Object.keys(s);return!1!==t.sort&&i.sort(t.sort),i.map((r=>{const s=e[r];return void 0===s?"":null===s?l(r,t):Array.isArray(s)?0===s.length&&"bracket-separator"===t.arrayFormat?l(r,t)+"[]":s.reduce(n(r),[]).join("&"):l(r,t)+"="+l(s,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[r,n]=i(e,"#");return Object.assign({url:r.split("?")[0]||"",query:f(h(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:u(n,t)}:{})},t.stringifyUrl=(e,r)=>{r=Object.assign({encode:!0,strict:!0,[a]:!0},r);const n=p(e.url).split("?")[0]||"",s=t.extract(e.url),i=t.parse(s,{sort:!1}),o=Object.assign(i,e.query);let c=t.stringify(o,r);c&&(c=`?${c}`);let u=function(e){let t="";const r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(u=`#${r[a]?l(e.fragmentIdentifier,r):e.fragmentIdentifier}`),`${n}${c}${u}`},t.pick=(e,r,n)=>{n=Object.assign({parseFragmentIdentifier:!0,[a]:!1},n);const{url:s,query:i,fragmentIdentifier:c}=t.parseUrl(e,n);return t.stringifyUrl({url:s,query:o(i,r),fragmentIdentifier:c},n)},t.exclude=(e,r,n)=>{const s=Array.isArray(r)?e=>!r.includes(e):(e,t)=>!r(e,t);return t.pick(e,s,n)}},"./node_modules/react/cjs/react.production.min.js":(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||m}function b(){}function v(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var w=v.prototype=new b;w.constructor=v,f(w,y.prototype),w.isPureReactComponent=!0;var C=Array.isArray,_=Object.prototype.hasOwnProperty,O={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var s,i={},o=null,a=null;if(null!=t)for(s in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,s)&&!I.hasOwnProperty(s)&&(i[s]=t[s]);var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(s in c=e.defaultProps)void 0===i[s]&&(i[s]=c[s]);return{$$typeof:r,type:e,key:o,ref:a,props:i,_owner:O.current}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var S=/\/+/g;function k(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function j(e,t,s,i,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case r:case n:c=!0}}if(c)return o=o(c=e),e=""===i?"."+k(c,0):i,C(o)?(s="",null!=e&&(s=e.replace(S,"$&/")+"/"),j(o,t,s,"",(function(e){return e}))):null!=o&&(A(o)&&(o=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,s+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(c=0,i=""===i?".":i+":",C(e))for(var l=0;l<e.length;l++){var u=i+k(a=e[l],l);c+=j(a,t,s,u,o)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=j(a=a.value,t,s,u=i+k(a,l++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function T(e,t,r){if(null==e)return e;var n=[],s=0;return j(e,n,"","",(function(e){return t.call(r,e,s++)})),n}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var x={current:null},D={transition:null},N={ReactCurrentDispatcher:x,ReactCurrentBatchConfig:D,ReactCurrentOwner:O};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,r){T(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=o,t.PureComponent=v,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.act=R,t.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=f({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=O.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)_.call(t,l)&&!I.hasOwnProperty(l)&&(s[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}return{$$typeof:r,type:e.type,key:i,ref:o,props:s,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return x.current.useCallback(e,t)},t.useContext=function(e){return x.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return x.current.useDeferredValue(e)},t.useEffect=function(e,t){return x.current.useEffect(e,t)},t.useId=function(){return x.current.useId()},t.useImperativeHandle=function(e,t,r){return x.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return x.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return x.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return x.current.useMemo(e,t)},t.useReducer=function(e,t,r){return x.current.useReducer(e,t,r)},t.useRef=function(e){return x.current.useRef(e)},t.useState=function(e){return x.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return x.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return x.current.useTransition()},t.version="18.3.1"},"./node_modules/react/index.js":(e,t,r)=>{"use strict";e.exports=r("./node_modules/react/cjs/react.production.min.js")},"./node_modules/split-on-first/index.js":e=>{"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}},"./node_modules/strict-uri-encode/index.js":e=>{"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},"./node_modules/@babel/runtime/helpers/regeneratorRuntime.js":(e,t,r)=>{var n=r("./node_modules/@babel/runtime/helpers/typeof.js").default;function s(){"use strict";e.exports=s=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},i=Object.prototype,o=i.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",d=c.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(t){p=function(e,t,r){return e[t]=r}}function h(e,t,r,n){var s=t&&t.prototype instanceof w?t:w,i=Object.create(s.prototype),o=new D(n||[]);return a(i,"_invoke",{value:j(e,r,o)}),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=h;var f="suspendedStart",g="suspendedYield",y="executing",b="completed",v={};function w(){}function C(){}function _(){}var O={};p(O,l,(function(){return this}));var I=Object.getPrototypeOf,E=I&&I(I(N([])));E&&E!==i&&o.call(E,l)&&(O=E);var A=_.prototype=w.prototype=Object.create(O);function S(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(s,i,a,c){var l=m(e[s],e,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,c)}))}c(l.arg)}var s;a(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,s){r(e,n,t,s)}))}return s=s?s.then(i,i):i()}})}function j(e,r,n){var s=f;return function(i,o){if(s===y)throw new Error("Generator is already running");if(s===b){if("throw"===i)throw o;return{value:t,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var c=T(a,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(s===f)throw s=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);s=y;var l=m(e,r,n);if("normal"===l.type){if(s=n.done?b:g,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(s=b,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,s=e.iterator[n];if(s===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=m(s,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var o=i.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[l];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,i=function r(){for(;++s<e.length;)if(o.call(e,s))return r.value=e[s],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(n(e)+" is not iterable")}return C.prototype=_,a(A,"constructor",{value:_,configurable:!0}),a(_,"constructor",{value:C,configurable:!0}),C.displayName=p(_,d,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===C||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,p(e,d,"GeneratorFunction")),e.prototype=Object.create(A),e},r.awrap=function(e){return{__await:e}},S(k.prototype),p(k.prototype,u,(function(){return this})),r.AsyncIterator=k,r.async=function(e,t,n,s,i){void 0===i&&(i=Promise);var o=new k(h(e,t,n,s),i);return r.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(A),p(A,d,"Generator"),p(A,l,(function(){return this})),p(A,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=N,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,s){return a.type="throw",a.arg=e,r.next=n,s&&(r.method="next",r.arg=t),!!s}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var s=n.arg;x(r)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},r}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/helpers/typeof.js":e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},"./node_modules/@babel/runtime/regenerator/index.js":(e,t,r)=>{var n=r("./node_modules/@babel/runtime/helpers/regeneratorRuntime.js")();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js":(e,t,r)=>{"use strict";function n(e,t,r,n,s,i,o){try{var a=e[i](o),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,s)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(s,i){var o=e.apply(t,r);function a(e){n(o,s,i,a,c,"next",e)}function c(e){n(o,s,i,a,c,"throw",e)}a(void 0)}))}}r.d(t,{A:()=>s})},"./node_modules/@babel/runtime/helpers/esm/classCallCheck.js":(e,t,r)=>{"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,{A:()=>n})},"./node_modules/@babel/runtime/helpers/esm/createClass.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r("./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js");function s(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,(0,n.A)(s.key),s)}}function i(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}},"./node_modules/@babel/runtime/helpers/esm/defineProperty.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r("./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js");function s(e,t,r){return(t=(0,n.A)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},"./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r("./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");function s(e,t){if(null==e)return{};var r,s,i=(0,n.A)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}},"./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js":(e,t,r)=>{"use strict";function n(e,t){if(null==e)return{};var r,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}r.d(t,{A:()=>n})},"./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r("./node_modules/@babel/runtime/helpers/esm/typeof.js");function s(e){var t=function(e,t){if("object"!==(0,n.A)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!==(0,n.A)(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,n.A)(t)?t:String(t)}},"./node_modules/@babel/runtime/helpers/esm/typeof.js":(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{A:()=>n})}},e=>{var t;t="./packages/quickload/src/quickload.ts",e(e.s=t)}]);
//# sourceMappingURL=quickload.2c7c30cefc969c338160.js.map